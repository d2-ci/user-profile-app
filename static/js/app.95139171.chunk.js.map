{"version":3,"sources":["D2App/locales/index.js","D2App/layout/theme.js","D2App/layout/InfoHeader.component.js","D2App/layout/InfoRow.component.js","D2App/aboutPage/AboutSection.component.js","D2App/aboutPage/AboutPage.component.js","D2App/optionValue.store.js","D2App/profile/profile.store.js","D2App/settings/userSettings.store.js","D2App/app.actions.js","D2App/account/account.actions.js","D2App/account/isValidPassword.js","D2App/account/AccountEditor.component.js","D2App/userSettingsMapping.js","D2App/layout/AvatarEditor.component.js","D2App/layout/FormFields.component.js","D2App/profile/isValidWhatsApp.js","D2App/profile/profile.actions.js","D2App/account/Account.component.js","D2App/account/PasswordChangeSuccessDialog.js","D2App/account/twoFactor/QRCode.js","D2App/account/twoFactor/setup-guide/phoneTypes.js","D2App/account/twoFactor/setup-guide/PhoneTypeInstructions.js","D2App/account/twoFactor/setup-guide/RadioButtons.js","D2App/account/twoFactor/setup-guide/DownloadGuide.js","D2App/account/twoFactor/setup-guide/SetupGuide.component.js","D2App/account/twoFactor/Status2FA.js","D2App/account/twoFactor/Status2FAChangeDialog.js","D2App/account/twoFactor/TwoFactor.js","D2App/layout/Sidebar.component.js","D2App/layout/Snackbar.component.js","D2App/profile/Profile.component.js","D2App/settings/userSettings.actions.js","D2App/settings/UserSettings.component.js","D2App/layout/InfoCard.component.js","D2App/viewProfile/ViewProfile.component.js","D2App/app.router.js","D2App/AppWrapper.js"],"names":["namespace","i18n","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","ruTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uzTranslations","uz_CyrlTranslations","uz_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","theme","spacing","Spacing","fontFamily","palette","primary1Color","blue500","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","grey500","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","Object","assign","forms","minWidth","maxWidth","formInput","fontWeight","styles","header","fontSize","color","AppTheme","rawTheme","padding","InfoHeader","text","React","createElement","style","InfoRow","label","value","labelStyle","className","defaultProps","card","marginTop","marginRight","AboutSection","attributes","Card","CardText","map","key","toString","_defineProperty","obj","defineProperty","enumerable","configurable","writable","parseDateFromUTCString","utcString","d2","hideIfEmpty","undefined","t","locale","currentUser","userSettings","settings","keyUiLocale","date","Date","options","day","month","year","hour","minute","hour12","Intl","DateTimeFormat","format","error","systemInfo","getDisplayValue","_value","target","rel","href","system","contextPath","username","databaseInfo","AboutPage","Component","constructor","args","super","this","selected","source","reduce","acc","attribute","context","push","getAttributes","length","contextTypes","PropTypes","object","isRequired","Store","create","appActions","Action","createActionsFromNames","init","subscribe","getD2","then","api","Api","getApi","Promise","all","get","useFallback","results","id","path","displayName","name","uiLocales","dbLocales","systemDefault","keys","defaults","userProfileStore","setState","state","qrCodeUrl","url","userSettingsStore","optionValueStore","log","debug","ReactDOM","render","AppRouter","document","querySelector","setCategory","data","hashHistory","accountActions","setPassword","oldPassword","newPassword","onSuccess","complete","payload","update","catch","err","message","showSnackbarMessage","status","permanent","setTwoFactorStatus","twoFA","userCredentials","getQrCode","oneDigit","oneUpperCase","oneSpecialCharacter","isValidPassword","test","notification","border","backgroundColor","AccountEditor","props","String","trim","reNewPassword","formState","formBuilder","form","pristine","validating","valid","isNotEmpty","clearRepeatPassword","e","v","wrongOldPasswordText","usesOpenIdConnect","externalAuth","fields","component","TextField","floatingLabelText","width","disabled","type","changeEvent","autoComplete","validators","validator","isSamePassword","FlatButton","onClick","openTwoFactorDialog","secondary","RaisedButton","updatePassword","Fragment","FormBuilder","onUpdateField","updateState","ref","r","settingsKeyMapping","firstName","surname","avatar","gender","gender_male","gender_female","gender_other","email","phoneNumber","introduction","multiLine","jobTitle","userRoles","userOrgUnits","birthday","nationality","employer","education","interests","languages","whatsApp","facebookMessenger","skype","telegram","twitter","accountEditor","showSystemDefault","keyDbLocale","keyStyle","keyAnalysisDisplayProperty","shortName","keyMessageEmailNotification","true","false","keyMessageSmsNotification","AvatarEditor","inputRef","node","async","onChange","file","event","files","loading","formData","FormData","append","imageId","post","response","fileResource","avatarSrc","parseAvatarSrc","userSettingsActions","console","getInputRef","userId","avatarId","baseUrl","renderAvatar","src","alt","renderPlaceholder","CircularProgress","containerElement","icon","FileUpload","primary","onFileSelect","display","accept","setInputRef","ActionDelete","onRemoveIcon","cardTitle","background","height","cardTitleText","noHits","userSettingsOverride","menuIcon","menuLabel","position","top","marginLeft","translateValidatorMessage","validatorMessage","createFieldBaseObject","fieldName","mapping","valueStore","hintText","valueString","prototype","hasOwnProperty","call","propsObject","baseValidators","wordToValidatorMap","has","getNameValidator","filter","createField","userSettingsKeyMapping","fieldBase","createTextField","DatePicker","dateFormat","keyDateFormat","textFieldStyle","allowFuture","createDateField","Checkbox","checked","saveUserKey","createCheckBox","menuItems","slice","systemSettingValue","systemSettingLabel","x","unshift","SelectField","includeEmpty","emptyLabel","noOptionsLabel","createDropDown","createAccountEditor","createAvatarEditor","warn","FormFields","componentDidMount","disposable","forceUpdate","componentWillUnmount","unsubscribe","renderFields","fieldNames","field","systemValue","actualSystemValue","systemValueLabel","find","item","systemDefaultLabel","WrappedComponent","wrapFieldWithLabel","pageLabel","fieldKeys","PHONE_PATTERN","isValidWhatsApp","set","userProfileActions","save","toISOString","Array","isArray","prev","curr","patch","user","removeAvatar","getProfileUpdatePromise","EditProfile","reload","window","location","PasswordChangeSuccessDialog","titleText","bodyText","buttonText","buttons","Dialog","title","actions","modal","open","qrCodePaperWrapper","qrCodePaper","flexDirection","justifyContent","alignItems","qrCode","QRCode","Paper","statusMessage","profileSettingsStore","playStoreLink","appStoreLink","phoneTypeInstructions","instructionItem","marginBottom","PhoneTypeInstructions","phoneType","phoneTypes","radioGroup","radioButton","RadioButtons","setPhoneType","RadioButtonGroup","RadioButton","downloadGuideWrapper","authIcon","downloadGuide","authDownloadHeader","DownloadGuide","onPhoneTypeChange","guideHeader","SetupGuide","statusButton","margin","Status2FA","openSetupDialog","buttonLabel","Status2FAChangeDialog","closeSetupDialog","handleDialogAnswer","dialogOpened","dialogTitle","TwoFactor","canRender","isTwoFactorOn","changeTwoFactorStatus","SidebarWrapper","sideBarSections","Sidebar","sections","onChangeSection","currentSection","messageStatus","warning","neutral","success","SnackWrapper","snackbarMessage","showSnackbar","autoHideDuration","subscriptions","params","forEach","sub","Snackbar","bodyStyle","onRequestClose","closeSnackbar","InfoCard","getUserRoles","getOrganisationUnits","getUserOrgUnitsValue","userOrgUnitsValues","valuesContainerMap","join","getUserRolesValue","userRolesValues","getOptionTypeValue","labelName","getBirthdayDateValue","dateValue","getDate","getMonth","getFullYear","getLabelValue","labelExists","labelValue","getLabelComponent","translatedLabelName","getLabelComponents","labelNames","renderLabels","labelKeys","ViewProfile","WrAppadApp","routes","children","getChildContext","getDataProviderProps","versionString","split","pop","apiVersion","isNaN","parseInt","DataProvider","MuiThemeProvider","Router","history","Route","UserSettings","Profile","Account","Redirect","from","to","childContextTypes","AppWrapper","useD2","onInitialized"],"mappings":"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","file":"static/js/app.95139171.chunk.js","sourcesContent":["//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uzTranslations from './uz/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz', namespace, uzTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { blue500, blue700, blue100, orange500, grey100, grey500, darkBlack, white, grey400 } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport Spacing from 'material-ui/styles/spacing';\nimport { fade } from 'material-ui/utils/colorManipulator';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: blue500,\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: grey500,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\nconst muiTheme = getMuiTheme(theme);\nexport default Object.assign({}, muiTheme, {\n  forms: {\n    minWidth: 350,\n    maxWidth: 750\n  },\n  formInput: {\n    fontWeight: 100\n  }\n});","import PropTypes from 'prop-types';\nimport React from 'react';\nimport AppTheme from '../layout/theme';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  }\n};\n\nconst InfoHeader = ({\n  text\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.header\n}, text);\n\nInfoHeader.propTypes = {\n  text: PropTypes.string.isRequired\n};\nexport default InfoHeader;","import PropTypes from 'prop-types';\nimport React from 'react';\n\nconst InfoRow = ({\n  label,\n  value,\n  labelStyle\n}) => /*#__PURE__*/React.createElement(\"tr\", {\n  className: \"info-row\"\n}, /*#__PURE__*/React.createElement(\"td\", {\n  className: \"info-cell-name\",\n  style: labelStyle\n}, label), /*#__PURE__*/React.createElement(\"td\", {\n  className: \"info-cell-value\"\n}, value));\n\nInfoRow.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.node.isRequired,\n  labelStyle: PropTypes.object\n};\nInfoRow.defaultProps = {\n  labelStyle: {}\n};\nexport default InfoRow;","import { Card, CardText } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport InfoHeader from '../layout/InfoHeader.component';\nimport InfoRow from '../layout/InfoRow.component';\nconst styles = {\n  card: {\n    marginTop: 8,\n    marginRight: '1rem',\n    padding: '0 1rem'\n  }\n};\n\nconst AboutSection = ({\n  header,\n  attributes\n}) => /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(InfoHeader, {\n  text: header\n}), /*#__PURE__*/React.createElement(Card, {\n  style: styles.card\n}, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(\"table\", {\n  className: \"info-content\"\n}, /*#__PURE__*/React.createElement(\"tbody\", null, attributes.map(({\n  label,\n  value\n}) => /*#__PURE__*/React.createElement(InfoRow, {\n  key: label,\n  label: label,\n  value: typeof value === 'boolean' ? value.toString() : value\n})))))));\n\nAboutSection.propTypes = {\n  attributes: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string.isRequired,\n    value: PropTypes.oneOfType([PropTypes.node, PropTypes.bool])\n  })).isRequired,\n  header: PropTypes.string.isRequired\n};\nexport default AboutSection;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport i18n from '../locales';\nimport AboutSection from './AboutSection.component';\n\nconst parseDateFromUTCString = (utcString, d2, hideIfEmpty) => {\n  try {\n    if (!utcString) {\n      return hideIfEmpty ? undefined : i18n.t('Never');\n    }\n\n    const locale = d2.currentUser.userSettings.settings.keyUiLocale;\n    const date = new Date(utcString);\n    const options = {\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false\n    };\n    return new Intl.DateTimeFormat(locale, options).format(date);\n  } catch (error) {\n    return i18n.t('Invalid date');\n  }\n};\n\nconst attributes = {\n  systemInfo: [{\n    key: null,\n    label: i18n.t('Web API'),\n    // eslint-disable-next-line react/display-name\n    getDisplayValue: (_value, d2) => /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      href: `${d2.system.systemInfo.contextPath}/api`\n    }, i18n.t('Browse it here'))\n  }, {\n    key: null,\n    label: i18n.t('Current user'),\n    getDisplayValue: (_value, d2) => d2.currentUser.username\n  }, {\n    key: 'version',\n    label: i18n.t('Version')\n  }, {\n    key: 'revision',\n    label: i18n.t('Build revision')\n  }, {\n    key: 'buildTime',\n    label: i18n.t('Build date'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'jasperReportsVersion',\n    label: i18n.t('Jasper reports version')\n  }, {\n    key: 'userAgent',\n    label: i18n.t('User agent')\n  }, {\n    key: 'serverDate',\n    label: i18n.t('Server date'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'lastAnalyticsTableSuccess',\n    label: i18n.t('Last analytics table generation'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'intervalSinceLastAnalyticsTableSuccess',\n    label: i18n.t('Time since last analytics table generation')\n  }, {\n    key: 'lastAnalyticsTableRuntime',\n    label: i18n.t('Last analytics table runtime')\n  }, {\n    key: 'lastAnalyticsTablePartitionSuccess',\n    label: i18n.t('Last continuous analytics table update'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2, true)\n  }, {\n    key: 'intervalSinceLastAnalyticsTablePartitionSuccess',\n    label: i18n.t('Time since last continuous analytics table update')\n  }, {\n    key: 'lastAnalyticsTablePartitionRuntime',\n    label: i18n.t('Last continuous analytics table runtime')\n  }, {\n    key: 'environmentVariable',\n    label: i18n.t('Environment variable')\n  }, {\n    key: 'systemId',\n    label: i18n.t('System ID')\n  }, {\n    key: 'lastSystemMonitoringSuccess',\n    label: i18n.t('Last monitoring success'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'externalDirectory',\n    label: i18n.t('External configuration directory')\n  }, {\n    key: 'fileStoreProvider',\n    label: i18n.t('File store provider')\n  }, {\n    key: 'nodeId',\n    label: i18n.t('Node ID')\n  }, {\n    key: 'cacheProvider',\n    label: i18n.t('Cache provider')\n  }, {\n    key: 'readReplicaCount',\n    label: i18n.t('Read replica count')\n  }, {\n    key: 'javaOpts',\n    label: i18n.t('Java opts')\n  }, {\n    key: 'javaVersion',\n    label: i18n.t('Java version')\n  }, {\n    key: 'javaVendor',\n    label: i18n.t('Java vendor')\n  }, {\n    key: 'osName',\n    label: i18n.t('OS name')\n  }, {\n    key: 'osArchitecture',\n    label: i18n.t('OS architecture')\n  }, {\n    key: 'osVersion',\n    label: i18n.t('OS version')\n  }, {\n    key: 'memoryInfo',\n    label: i18n.t('Memory info')\n  }, {\n    key: 'cpuCores',\n    label: i18n.t('CPU cores')\n  }, {\n    key: 'calendar',\n    label: i18n.t('Calendar')\n  }],\n  databaseInfo: [{\n    key: 'name',\n    label: i18n.t('Name')\n  }, {\n    key: 'user',\n    label: i18n.t('User')\n  }, {\n    key: 'spatialSupport',\n    label: i18n.t('Spatial support')\n  }]\n};\n\nclass AboutPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"getAttributes\", (selected, source) => selected.reduce((acc, attribute) => {\n      if (attribute.getDisplayValue !== undefined) {\n        const value = attribute.getDisplayValue(source[attribute.key], this.context.d2);\n\n        if (value !== undefined) {\n          acc.push({\n            label: attribute.label,\n            value\n          });\n        }\n      } else if (source[attribute.key]) {\n        acc.push({\n          label: attribute.label,\n          value: source[attribute.key]\n        });\n      }\n\n      return acc;\n    }, []));\n\n    _defineProperty(this, \"render\", () => {\n      const {\n        d2\n      } = this.context;\n      const systemInfo = this.getAttributes(attributes.systemInfo, d2.system.systemInfo);\n      const databaseInfo = this.getAttributes(attributes.databaseInfo, d2.system.systemInfo.databaseInfo);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-area\"\n      }, systemInfo.length > 0 && /*#__PURE__*/React.createElement(AboutSection, {\n        header: i18n.t('System info'),\n        attributes: systemInfo\n      }), databaseInfo.length > 0 && /*#__PURE__*/React.createElement(AboutSection, {\n        header: i18n.t('Database'),\n        attributes: databaseInfo\n      }));\n    });\n  }\n\n}\n\nAboutPage.contextTypes = {\n  d2: PropTypes.object.isRequired\n};\nexport default AboutPage;","import Store from 'd2-ui/lib/store/Store';\nexport default Store.create();","import Store from 'd2-ui/lib/store/Store';\nexport default Store.create();","import Store from 'd2-ui/lib/store/Store';\nexport default Store.create();","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport log from 'loglevel';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { hashHistory } from 'react-router';\nimport AppRouter from './app.router';\nimport optionValueStore from './optionValue.store';\nimport userProfileStore from './profile/profile.store';\nimport userSettingsStore from './settings/userSettings.store';\nconst appActions = Action.createActionsFromNames(['init', 'setCategory', 'showSnackbarMessage' // Implemented in Snackbar.component.js\n]);\nappActions.init.subscribe(() => {\n  getD2().then(d2 => {\n    const api = d2.Api.getApi();\n    Promise.all([api.get('system/styles'), api.get('locales/ui'), api.get('locales/db'), api.get('userSettings', {\n      useFallback: false\n    }), d2.system.settings.all(), api.get('2fa/qr')]).then(results => {\n      const styles = (results[0] || []).map(style => ({\n        id: style.path,\n        displayName: style.name\n      }));\n      const uiLocales = (results[1] || []).map(locale => ({\n        id: locale.locale,\n        displayName: locale.name\n      }));\n      const dbLocales = (results[2] || []).map(locale => ({\n        id: locale.locale,\n        displayName: locale.name\n      }));\n      const systemDefault = Object.keys(results[4]).reduce((defaults, key) => {\n        defaults[key] = results[4][key];\n        return defaults;\n      }, {});\n      userProfileStore.setState(d2.currentUser);\n      userProfileStore.state.qrCodeUrl = results[5].url;\n      userSettingsStore.setState(results[3]);\n      optionValueStore.setState({\n        styles,\n        uiLocales,\n        dbLocales,\n        systemDefault\n      });\n      log.debug('Current user profile loaded:', userProfileStore.state);\n      log.debug('Current user settings loaded:', userSettingsStore.state);\n      ReactDOM.render( /*#__PURE__*/React.createElement(AppRouter, {\n        d2: d2\n      }), document.querySelector('#app'));\n    }, error => {\n      log.error('Failed to load user settings:', error);\n    });\n  });\n});\nappActions.setCategory.subscribe(({\n  data: target\n}) => {\n  hashHistory.push(`/${target}`);\n});\nexport default appActions;","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport log from 'loglevel';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\nimport userProfileStore from '../profile/profile.store';\nconst accountActions = Action.createActionsFromNames(['setPassword', 'setTwoFactorStatus', 'getQrCode']);\naccountActions.setPassword.subscribe(({\n  data: [oldPassword, newPassword, onSuccess],\n  complete,\n  error\n}) => {\n  const payload = {\n    oldPassword,\n    newPassword\n  };\n  getD2().then(d2 => {\n    const api = d2.Api.getApi();\n    api.update('/me/changePassword', payload).then(() => {\n      log.debug('Password updated successfully.');\n      appActions.setCategory('passwordChanged');\n      onSuccess();\n      complete();\n    }).catch(err => {\n      const message = err && err.message && typeof err.message === 'string' ? err.message : i18n.t('Failed to update password');\n      appActions.showSnackbarMessage({\n        message,\n        status: 'error',\n        permanent: true\n      });\n      log.error('Failed to update password:', err);\n      error();\n    });\n  });\n});\naccountActions.setTwoFactorStatus.subscribe(({\n  data: twoFA,\n  complete,\n  error\n}) => {\n  const payload = {\n    userCredentials: {\n      twoFA\n    }\n  };\n  const status = twoFA ? 'on' : 'off';\n  getD2().then(d2 => {\n    userProfileStore.state.twoFA = twoFA;\n    userProfileStore.setState(userProfileStore.state);\n    const api = d2.Api.getApi();\n    api.update('/me', payload).then(() => {\n      log.debug(`2 Factor is now ${status}.`);\n      appActions.showSnackbarMessage({\n        message: twoFA ? i18n.t('2-Factor successfully turned ON') : i18n.t('2-Factor successfully turned OFF'),\n        status: 'success'\n      });\n      complete();\n    }).catch(err => {\n      appActions.showSnackbarMessage({\n        message: twoFA ? i18n.t('Failed to turn ON 2-Factor') : i18n.t('Failed to turn OFF 2-Factor'),\n        status: 'error'\n      });\n      log.error('Failed to change 2 Factor status:', err);\n      error();\n    });\n  });\n});\naccountActions.getQrCode.subscribe(() => {});\nexport default accountActions;","// Atleast one digit\nconst oneDigit = /^(?=.*\\d)/; // Atleast one uppercase character\n\nconst oneUpperCase = /^(?=.*[A-Z])/; // Atleast one special character\n// Using this regex to match all non-alphanumeric characters to match server-side implementation\n// https://github.com/dhis2/dhis2-core/blob/master/dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/user/SpecialCharacterValidationRule.java#L39\n\nconst oneSpecialCharacter = /[^a-zA-Z0-9]/;\nexport default function isValidPassword(value) {\n  if (!value) {\n    return true;\n  }\n\n  return oneDigit.test(value) && oneUpperCase.test(value) && oneSpecialCharacter.test(value) && value.length > 7 && value.length < 36;\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport TextField from 'd2-ui/lib/form-fields/TextField';\nimport FormBuilder from 'd2-ui/lib/forms/FormBuilder.component';\nimport { FlatButton, RaisedButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\nimport accountActions from './account.actions';\nimport isValidPassword from './isValidPassword';\nconst styles = {\n  notification: {\n    border: '1px solid #bdbdbd',\n    backgroundColor: '#e5e5e5',\n    padding: 12\n  }\n};\n\nclass AccountEditor extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"isSamePassword\", value => {\n      return value === this.state.newPassword;\n    });\n\n    _defineProperty(this, \"isNotEmpty\", value => {\n      return value && String(value).trim().length > 0;\n    });\n\n    _defineProperty(this, \"clearRepeatPassword\", () => {\n      this.setState({\n        oldPassword: '',\n        reNewPassword: '',\n        newPassword: ''\n      });\n      return true;\n    });\n\n    _defineProperty(this, \"updatePassword\", () => {\n      const formState = this.formBuilder ? this.formBuilder.state.form : {};\n\n      if (formState.pristine === true) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('No changes have been made')\n        });\n      } else if (formState.validating === true) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('The form is currently being validated. Please try again.'),\n          status: 'warning'\n        });\n      } else if (formState.valid !== true) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('The form contains errors. Please fix the errors and try again.'),\n          status: 'error'\n        });\n      } else if (!this.isNotEmpty(this.state.newPassword) || !this.isNotEmpty(this.state.reNewPassword)) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('The entered values do not match. Please re-enter.'),\n          status: 'error'\n        });\n      } else if (!this.isNotEmpty(this.state.oldPassword)) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('Please provide your old password'),\n          status: 'error'\n        });\n      } else {\n        accountActions.setPassword(this.state.oldPassword, this.state.newPassword, this.clearRepeatPassword);\n      }\n    });\n\n    _defineProperty(this, \"openTwoFactorDialog\", () => {\n      appActions.setCategory('twoFactor');\n    });\n\n    _defineProperty(this, \"updateState\", (e, v) => {\n      this.setState({\n        [e]: v\n      });\n    });\n\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      reNewPassword: '',\n      wrongOldPasswordText: ''\n    };\n  }\n\n  render() {\n    const usesOpenIdConnect = this.context.d2.currentUser.externalAuth;\n    const fields = [{\n      name: 'username',\n      component: TextField,\n      value: this.props.username,\n      props: {\n        floatingLabelText: i18n.t('Username'),\n        style: {\n          width: '100%'\n        },\n        disabled: true\n      }\n    }, {\n      name: 'oldPassword',\n      component: TextField,\n      value: this.state.oldPassword,\n      props: {\n        type: 'password',\n        floatingLabelText: i18n.t('Old password'),\n        style: {\n          width: '100%'\n        },\n        changeEvent: 'onBlur',\n        autoComplete: 'new-password',\n        disabled: usesOpenIdConnect\n      },\n      validators: [{\n        validator: this.isNotEmpty,\n        message: i18n.t(\"This field can't be left blank\")\n      }]\n    }, {\n      name: 'newPassword',\n      component: TextField,\n      value: this.state.newPassword,\n      props: {\n        type: 'password',\n        floatingLabelText: i18n.t('New password'),\n        style: {\n          width: '100%'\n        },\n        changeEvent: 'onBlur',\n        autoComplete: 'new-password',\n        disabled: usesOpenIdConnect\n      },\n      validators: [{\n        validator: isValidPassword,\n        message: i18n.t('Password should be at least 8 characters with at least 1 digit, 1 uppercase letter and 1 special character')\n      }]\n    }, {\n      name: 'reNewPassword',\n      component: TextField,\n      value: this.state.reNewPassword,\n      props: {\n        type: 'password',\n        floatingLabelText: i18n.t('Repeat new password'),\n        style: {\n          width: '100%'\n        },\n        changeEvent: 'onBlur',\n        autoComplete: 'new-password',\n        disabled: usesOpenIdConnect\n      },\n      validators: [{\n        validator: this.isSamePassword,\n        message: i18n.t('The entered values do not match. Please re-enter.')\n      }]\n    }, {\n      name: 'twoFactorSetupButton',\n      component: FlatButton,\n      props: {\n        label: i18n.t('Setup 2-Factor'),\n        onClick: this.openTwoFactorDialog,\n        style: {\n          marginTop: '20px'\n        },\n        secondary: false,\n        disabled: usesOpenIdConnect\n      }\n    }, {\n      name: 'postbutton',\n      component: RaisedButton,\n      props: {\n        label: i18n.t('Update password'),\n        onClick: this.updatePassword,\n        style: {\n          marginTop: '20px'\n        },\n        secondary: true,\n        disabled: usesOpenIdConnect\n      }\n    }];\n\n    const setRef = r => {\n      this.formBuilder = r;\n    };\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, usesOpenIdConnect && /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.notification\n    }, i18n.t(\"This account is linked to an OpenID Connect identity. Visit the Open ID Connect provider to manage this account's settings.\")), /*#__PURE__*/React.createElement(FormBuilder, {\n      fields: fields,\n      onUpdateField: this.updateState,\n      ref: setRef\n    }));\n  }\n\n}\n\nAccountEditor.propTypes = {\n  username: PropTypes.string.isRequired\n};\nAccountEditor.contextTypes = {\n  d2: PropTypes.object.isRequired\n};\nexport default AccountEditor;","import i18n from './locales';\nconst settingsKeyMapping = {\n  /* ================================================================= */\n\n  /* Category: Profile Settings                                        */\n\n  /* ================================================================= */\n  firstName: {\n    label: i18n.t('First name'),\n    type: 'textfield',\n    validators: ['required']\n  },\n  surname: {\n    label: i18n.t('Surname'),\n    type: 'textfield',\n    validators: ['required']\n  },\n  avatar: {\n    label: i18n.t('Profile picture'),\n    type: 'avatar'\n  },\n  gender: {\n    label: i18n.t('Gender'),\n    type: 'dropdown',\n    options: {\n      gender_male: i18n.t('Male'),\n      gender_female: i18n.t('Female'),\n      gender_other: i18n.t('Other')\n    }\n  },\n  email: {\n    label: i18n.t('E-mail'),\n    type: 'textfield',\n    validators: ['email']\n  },\n  phoneNumber: {\n    label: i18n.t('Mobile phone number'),\n    type: 'textfield'\n  },\n  introduction: {\n    label: i18n.t('Introduction'),\n    type: 'textfield',\n    multiLine: true\n  },\n  jobTitle: {\n    label: i18n.t('Job title'),\n    type: 'textfield'\n  },\n  userRoles: {\n    label: i18n.t('User roles'),\n    type: 'userRoles',\n    validators: ['required']\n  },\n  userOrgUnits: {\n    label: i18n.t('User org units'),\n    type: 'userOrgUnits',\n    validators: ['required']\n  },\n  birthday: {\n    label: i18n.t('Birthday'),\n    type: 'date'\n  },\n  nationality: {\n    label: i18n.t('Nationality'),\n    type: 'textfield'\n  },\n  employer: {\n    label: i18n.t('Employer'),\n    type: 'textfield'\n  },\n  education: {\n    label: i18n.t('Education'),\n    type: 'textfield',\n    multiLine: true\n  },\n  // TODO: chips component for interests and languages?\n  interests: {\n    label: i18n.t('Interests'),\n    type: 'textfield',\n    multiLine: true\n  },\n  languages: {\n    label: i18n.t('Languages'),\n    type: 'textfield',\n    multiLine: true\n  },\n  whatsApp: {\n    label: i18n.t('WhatsApp'),\n    type: 'textfield',\n    validators: ['whats_app']\n  },\n  facebookMessenger: {\n    label: i18n.t('Facebook Messenger'),\n    type: 'textfield'\n  },\n  skype: {\n    label: i18n.t('Skype'),\n    type: 'textfield'\n  },\n  telegram: {\n    label: i18n.t('Telegram'),\n    type: 'textfield'\n  },\n  twitter: {\n    label: i18n.t('Twitter'),\n    type: 'textfield'\n  },\n\n  /* ================================================================= */\n\n  /* Category: Account Settings                                        */\n\n  /* ================================================================= */\n  accountEditor: {\n    label: i18n.t('Account editor'),\n    type: 'accountEditor'\n  },\n\n  /* ================================================================= */\n\n  /* Category: System Settings                                         */\n\n  /* ================================================================= */\n  keyUiLocale: {\n    label: i18n.t('Interface language'),\n    type: 'dropdown',\n    source: 'uiLocales',\n    showSystemDefault: true\n  },\n  keyDbLocale: {\n    label: i18n.t('Database language'),\n    type: 'dropdown',\n    source: 'dbLocales',\n    showSystemDefault: true\n  },\n  keyStyle: {\n    label: i18n.t('Style'),\n    type: 'dropdown',\n    source: 'styles',\n    showSystemDefault: true\n  },\n  keyAnalysisDisplayProperty: {\n    label: i18n.t('Property to display in analysis modules'),\n    type: 'dropdown',\n    options: {\n      name: i18n.t('Name'),\n      shortName: i18n.t('Short name')\n    },\n    showSystemDefault: true\n  },\n  keyMessageEmailNotification: {\n    label: i18n.t('Enable message email notifications'),\n    type: 'dropdown',\n    options: {\n      true: i18n.t('Yes'),\n      false: i18n.t('No')\n    }\n  },\n  keyMessageSmsNotification: {\n    label: i18n.t('Enable message SMS notifications'),\n    type: 'dropdown',\n    options: {\n      true: i18n.t('Yes'),\n      false: i18n.t('No')\n    }\n  }\n};\nexport default settingsKeyMapping;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport CircularProgress from 'material-ui/CircularProgress';\nimport FlatButton from 'material-ui/FlatButton';\nimport ActionDelete from 'material-ui/svg-icons/action/delete';\nimport FileUpload from 'material-ui/svg-icons/file/file-upload';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport userSettingsActions from '../app.actions';\nimport i18n from '../locales';\nimport './avatareditor.component.css';\n\nclass AvatarEditor extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getInputRef\", () => this.inputRef);\n\n    _defineProperty(this, \"setInputRef\", node => this.inputRef = node);\n\n    _defineProperty(this, \"onFileSelect\", async event => {\n      const {\n        onChange\n      } = this.props; // Setup form data for image file\n\n      const file = event.target.files[0]; // Cancel was pressed, no file provided\n\n      if (!file) {\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('domain', 'USER_AVATAR'); // Send image to server and save image id as avatar\n\n      try {\n        const postResponse = await this.api.post('fileResources', formData);\n        const imageId = postResponse.response.fileResource.id;\n        onChange({\n          target: {\n            value: {\n              id: imageId\n            }\n          }\n        });\n        this.setState({\n          loading: false,\n          avatarSrc: this.parseAvatarSrc(imageId)\n        });\n      } catch (error) {\n        userSettingsActions.showSnackbarMessage({\n          message: i18n.t('Failed to upload profile picture'),\n          status: 'error'\n        });\n        console.error('POST request to fileResources endpoint failed: ', error);\n      }\n    });\n\n    _defineProperty(this, \"onRemoveIcon\", () => {\n      this.props.onChange({\n        target: {\n          value: null\n        }\n      }); // Clear input here to ensure that a re-upload of a previously used file is not ignored\n\n      const input = this.getInputRef();\n      input.value = null;\n      this.setState({\n        avatarSrc: null\n      });\n    });\n\n    this.api = props.d2.Api.getApi();\n    this.userId = props.currentUser.id;\n    this.state = {\n      avatarSrc: props.currentUser.avatar ? this.parseAvatarSrc(props.currentUser.avatar.id) : null,\n      loading: false\n    };\n    this.inputRef = null;\n  }\n\n  parseAvatarSrc(avatarId) {\n    return `${this.api.baseUrl}/fileResources/${avatarId}/data`;\n  }\n\n  renderAvatar() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__preview\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.avatarSrc,\n      className: \"avatar-editor__image\",\n      alt: i18n.t('Profile picture')\n    }));\n  }\n\n  renderPlaceholder() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__not-available\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, i18n.t('No profile picture available')));\n  }\n\n  render() {\n    const {\n      loading,\n      avatarSrc\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"avatar-editor__label\"\n    }, i18n.t('Profile picture')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__preview-wrap\"\n    }, loading ? /*#__PURE__*/React.createElement(CircularProgress, null) : avatarSrc ? this.renderAvatar() : this.renderPlaceholder()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__buttonstrip\"\n    }, /*#__PURE__*/React.createElement(FlatButton, {\n      containerElement: \"label\",\n      icon: /*#__PURE__*/React.createElement(FileUpload, null),\n      label: i18n.t('Select profile picture'),\n      primary: true\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.onFileSelect,\n      style: {\n        display: 'none'\n      },\n      type: \"file\",\n      accept: \"image/*\",\n      ref: this.setInputRef\n    })), avatarSrc && /*#__PURE__*/React.createElement(FlatButton, {\n      icon: /*#__PURE__*/React.createElement(ActionDelete, null),\n      label: i18n.t('Remove profile picture'),\n      onClick: this.onRemoveIcon\n    })));\n  }\n\n}\n\nAvatarEditor.propTypes = {\n  currentUser: PropTypes.object.isRequired,\n  d2: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default AvatarEditor;","import Checkbox from 'd2-ui/lib/form-fields/CheckBox.component';\nimport DatePicker from 'd2-ui/lib/form-fields/DatePicker.component';\nimport SelectField from 'd2-ui/lib/form-fields/DropDown.component';\nimport TextField from 'd2-ui/lib/form-fields/TextField';\nimport FormBuilder from 'd2-ui/lib/forms/FormBuilder.component';\nimport { wordToValidatorMap } from 'd2-ui/lib/forms/Validators';\nimport log from 'loglevel';\nimport { Card, CardText } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport AccountEditor from '../account/AccountEditor.component';\nimport userSettingsActions from '../app.actions';\nimport i18n from '../locales';\nimport optionValueStore from '../optionValue.store';\nimport userSettingsStore from '../settings/userSettings.store';\nimport userSettingsKeyMapping from '../userSettingsMapping';\nimport AvatarEditor from './AvatarEditor.component';\nimport AppTheme from './theme';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  },\n  card: {\n    marginTop: 8,\n    marginRight: '1rem',\n    padding: '0 1rem'\n  },\n  cardTitle: {\n    background: AppTheme.rawTheme.palette.primary2Color,\n    height: 62\n  },\n  cardTitleText: {\n    fontSize: 28,\n    fontWeight: 100,\n    color: AppTheme.rawTheme.palette.alternateTextColor\n  },\n  noHits: {\n    padding: '1rem',\n    marginTop: '1rem',\n    fontWeight: 300\n  },\n  userSettingsOverride: {\n    color: AppTheme.rawTheme.palette.primary1Color,\n    marginTop: -6,\n    fontSize: '0.8rem',\n    fontWeight: 400\n  },\n  menuIcon: {\n    color: '#757575'\n  },\n  menuLabel: {\n    position: 'relative',\n    top: -6,\n    marginLeft: 16\n  }\n};\n\nfunction wrapWithLabel(WrappedComponent, label) {\n  // eslint-disable-next-line react/display-name\n  return props => {\n    const labelStyle = styles.userSettingsOverride;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(WrappedComponent, props), /*#__PURE__*/React.createElement(\"div\", {\n      style: labelStyle\n    }, label));\n  };\n} // Handles translation keys from d2-ui form validators\n\n\nfunction translateValidatorMessage(validatorMessage) {\n  switch (validatorMessage) {\n    case 'value_required':\n      return i18n.t('This field is required');\n\n    case 'value_should_be_a_url':\n      return i18n.t('This field should be a URL');\n\n    case 'value_should_be_list_of_urls':\n      return i18n.t('This field should contain a list of URLs');\n\n    case 'value_should_be_a_number':\n      return i18n.t('This field should be a number');\n\n    case 'value_should_be_a_positive_number':\n      return i18n.t('This field should be a positive number');\n\n    case 'value_should_be_an_email':\n      return i18n.t('This field should be an email');\n\n    case 'invalid_whats_app':\n      return i18n.t('Please enter a valid international phone number (+0123456789)');\n\n    default:\n      return validatorMessage;\n  }\n}\n\nfunction getNameValidator(name) {\n  if (wordToValidatorMap.has(name)) {\n    return {\n      validator: wordToValidatorMap.get(name),\n      message: translateValidatorMessage(wordToValidatorMap.get(name).message)\n    };\n  }\n\n  return false;\n}\n\nfunction createTextField(fieldBase, mapping) {\n  return Object.assign({}, fieldBase, {\n    props: Object.assign({}, fieldBase.props, {\n      changeEvent: 'onBlur',\n      multiLine: !!mapping.multiLine,\n      disabled: !!mapping.disabled\n    })\n  });\n} // eslint-disable-next-line max-params\n\n\nfunction createDateField(fieldBase, fieldName, mapping, valueStore) {\n  const state = valueStore.state;\n  return Object.assign({}, fieldBase, {\n    component: DatePicker,\n    value: state && state[fieldName] ? new Date(state[fieldName]) : '',\n    props: Object.assign({}, fieldBase.props, {\n      floatingLabelText: mapping.label,\n      dateFormat: userSettingsStore.state.keyDateFormat || 'yyyy-MM-dd',\n      textFieldStyle: {\n        width: '100%'\n      },\n      allowFuture: false\n    })\n  });\n}\n\nfunction createCheckBox(fieldBase, fieldName) {\n  return Object.assign({}, fieldBase, {\n    component: Checkbox,\n    props: {\n      value: '',\n      label: fieldBase.props.floatingLabelText,\n      style: fieldBase.props.style,\n      checked: fieldBase.value.toString() === 'true',\n      onChange: (e, v) => {\n        userSettingsActions.saveUserKey(fieldName, v ? 'true' : 'false');\n      }\n    }\n  });\n} // eslint-disable-next-line max-params\n\n\nfunction createDropDown(fieldBase, fieldName, valueStore, mapping) {\n  const value = valueStore.state[fieldName] || valueStore.state[fieldName] === false ? valueStore.state[fieldName].toString() : mapping.showSystemDefault ? 'system_default' : 'null';\n  const menuItems = (mapping.source ? optionValueStore.state && optionValueStore.state[mapping.source] || [] : Object.keys(mapping.options).map(id => {\n    const displayName = mapping.options[id];\n    return {\n      id,\n      displayName\n    };\n  })).slice();\n  const systemSettingValue = optionValueStore.state && optionValueStore.state.systemDefault && optionValueStore.state.systemDefault[fieldName];\n  let systemSettingLabel;\n\n  if (typeof systemSettingValue === 'boolean') {\n    systemSettingLabel = systemSettingValue ? i18n.t('Yes') : i18n.t('No');\n  } else if (optionValueStore.state[mapping.source]) {\n    systemSettingLabel = optionValueStore.state[mapping.source].filter(x => x.id === systemSettingValue).map(x => x.displayName)[0] || i18n.t('No value');\n  } else if (systemSettingValue === 'null' || systemSettingValue === 'system_default' || typeof systemSettingValue === 'undefined') {\n    systemSettingLabel = i18n.t('No value');\n  } else {\n    systemSettingLabel = systemSettingValue;\n  }\n\n  if (mapping.showSystemDefault) {\n    menuItems.unshift({\n      id: 'system_default',\n      // TODO: use i18n interpolation here\n      displayName: `${i18n.t('Use system default')} (${systemSettingLabel})`\n    });\n  }\n\n  return Object.assign({}, fieldBase, {\n    component: SelectField,\n    value,\n    props: Object.assign({}, fieldBase.props, {\n      includeEmpty: !!mapping.includeEmpty,\n      emptyLabel: mapping.includeEmpty ? mapping.emptyLabel : undefined,\n      noOptionsLabel: i18n.t('No options')\n    }, {\n      menuItems\n    })\n  });\n}\n\nfunction createAccountEditor(fieldBase, d2, valueStore) {\n  return Object.assign({}, fieldBase, {\n    component: AccountEditor,\n    props: {\n      d2,\n      username: valueStore.state.username\n    }\n  });\n}\n\nfunction createAvatarEditor(fieldBase, d2, valueStore) {\n  return Object.assign({}, fieldBase, {\n    component: AvatarEditor,\n    props: {\n      d2,\n      currentUser: valueStore.state\n    }\n  });\n}\n\nfunction createFieldBaseObject(fieldName, mapping, valueStore) {\n  const state = valueStore.state;\n  const hintText = mapping.hintText;\n  const valueString = Object.prototype.hasOwnProperty.call(state, fieldName) ? String(state[fieldName]).trim() : '';\n  const propsObject = {\n    floatingLabelText: mapping.label,\n    style: {\n      width: '100%'\n    },\n    hintText\n  };\n  const baseValidators = (mapping.validators || []).map(name => getNameValidator(name)).filter(v => v);\n  return Object.assign({}, {\n    name: fieldName,\n    value: valueString,\n    component: TextField,\n    props: propsObject,\n    validators: baseValidators\n  });\n}\n\nfunction createField(fieldName, valueStore, d2) {\n  const mapping = userSettingsKeyMapping[fieldName];\n  const fieldBase = createFieldBaseObject(fieldName, mapping, valueStore);\n\n  switch (mapping.type) {\n    case 'textfield':\n      return createTextField(fieldBase, mapping);\n\n    case 'date':\n      return createDateField(fieldBase, fieldName, mapping, valueStore);\n\n    case 'checkbox':\n      return createCheckBox(fieldBase, fieldName);\n\n    case 'dropdown':\n      return createDropDown(fieldBase, fieldName, valueStore, mapping);\n\n    case 'accountEditor':\n      return createAccountEditor(fieldBase, d2, valueStore);\n\n    case 'avatar':\n      return createAvatarEditor(fieldBase, d2, valueStore);\n\n    default:\n      log.warn(`Unknown control type \"${mapping.type}\" encountered for field \"${fieldName}\"`);\n      return {};\n  }\n}\n\nfunction wrapFieldWithLabel(field) {\n  const mapping = userSettingsKeyMapping[field.name]; // For settings that have a system wide default value,\n  // and is overridden by the current user, display\n  // the system wide default under the current user\n  // setting (which may be the same value)\n\n  if (mapping.showSystemDefault && field.value && field.value !== null && field.value !== 'null' && Object.prototype.hasOwnProperty.call(optionValueStore.state.systemDefault, field.name)) {\n    const systemValue = optionValueStore.state.systemDefault[field.name];\n    const actualSystemValue = systemValue !== undefined && systemValue !== null && systemValue !== 'null';\n    let systemValueLabel = systemValue;\n\n    if (mapping.source && actualSystemValue) {\n      systemValueLabel = optionValueStore.state[mapping.source].find(item => item.id === systemValue).displayName;\n    } else if (field.props.menuItems && actualSystemValue) {\n      systemValueLabel = field.props.menuItems.find(item => item.id === systemValue || String(systemValue) === item.id).displayName;\n    } else {\n      systemValueLabel = mapping.options[systemValue];\n    } // TODO: use i18n interpolation here\n\n\n    const systemDefaultLabel = `${i18n.t('System default')}: ${systemValueLabel}`;\n    return Object.assign(field, {\n      component: wrapWithLabel(field.component, systemDefaultLabel)\n    });\n  }\n\n  return field;\n}\n\nclass FormFields extends Component {\n  componentDidMount() {\n    this.disposable = this.props.valueStore.subscribe(() => {\n      this.forceUpdate();\n    });\n  }\n\n  componentWillUnmount() {\n    this.disposable.unsubscribe();\n  }\n\n  renderFields(fieldNames) {\n    const d2 = this.context.d2;\n    const valueStore = this.props.valueStore;\n    const fields = fieldNames.map(fieldName => createField(fieldName, valueStore, d2)).filter(field => !!field.name).map(field => wrapFieldWithLabel(field));\n    return /*#__PURE__*/React.createElement(Card, {\n      style: styles.card\n    }, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(FormBuilder, {\n      fields: fields,\n      onUpdateField: this.props.onUpdateField\n    })));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-area\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, this.props.pageLabel), /*#__PURE__*/React.createElement(\"form\", {\n      autoComplete: \"off\"\n    }, this.renderFields(this.props.fieldKeys)));\n  }\n\n}\n\nFormFields.propTypes = {\n  fieldKeys: PropTypes.arrayOf(PropTypes.string).isRequired,\n  pageLabel: PropTypes.string.isRequired,\n  valueStore: PropTypes.object.isRequired,\n  onUpdateField: PropTypes.func.isRequired\n};\nFormFields.contextTypes = {\n  d2: PropTypes.object.isRequired\n};\nexport default FormFields;","const PHONE_PATTERN = /^\\+(?:[0-9].?){4,14}[0-9]$/;\nexport default function isValidWhatsApp(value) {\n  // It's an optional field so empty is also valid\n  return !value || PHONE_PATTERN.test(value);\n}\nisValidWhatsApp.message = 'invalid_whats_app';","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport { wordToValidatorMap } from 'd2-ui/lib/forms/Validators';\nimport log from 'loglevel';\nimport userSettingsActions from '../app.actions';\nimport i18n from '../locales';\nimport userSettingsKeyMapping from '../userSettingsMapping';\nimport isValidWhatsApp from './isValidWhatsApp';\nimport userProfileStore from './profile.store'; // Add whatsApp validation to the validator set\n\nwordToValidatorMap.set('whats_app', isValidWhatsApp);\nconst userProfileActions = Action.createActionsFromNames(['save']);\nuserProfileActions.save.subscribe(({\n  data,\n  complete,\n  error\n}) => {\n  const [key, value] = data;\n  let payload = {\n    [key]: String(value).trim() || ' '\n  }; // TODO: Ugly hack to allow saving empty fields\n\n  if (key === 'birthday') {\n    const date = new Date(value);\n    payload = {\n      [key]: date.toISOString()\n    };\n  }\n\n  getD2().then(d2 => {\n    userProfileStore.state[key] = value;\n    userProfileStore.setState(userProfileStore.state); // Run field validators\n\n    if (Array.isArray(userSettingsKeyMapping[key].validators)) {\n      const validators = userSettingsKeyMapping[key].validators;\n\n      if (!validators.reduce((prev, curr) => prev && wordToValidatorMap.get(curr)(value), true)) {\n        log.warn(`One or more validators did not pass for field \"${key}\" and value \"${value}\"`);\n        return;\n      }\n    }\n\n    getProfileUpdatePromise({\n      key,\n      value,\n      payload,\n      userId: userProfileStore.state.id,\n      d2\n    }).then(() => {\n      log.debug('User Profile updated successfully.');\n      userSettingsActions.showSnackbarMessage({\n        message: i18n.t('User profile updated'),\n        status: 'success'\n      });\n      complete();\n    }).catch(err => {\n      userSettingsActions.showSnackbarMessage({\n        message: i18n.t('Failed to update user profile'),\n        status: 'error'\n      });\n      log.error('Failed to update user profile:', err);\n      error();\n    });\n  });\n});\n\nfunction getProfileUpdatePromise({\n  key,\n  value,\n  payload,\n  userId,\n  d2\n}) {\n  const api = d2.Api.getApi();\n\n  if (key === 'avatar') {\n    if (value) {\n      // Set avatar\n      // Post avatar directly to the `/user/<ID>` endpoint, because d2 update calls to `/me` cause issues\n      return api.patch(`/users/${userId}`, {\n        avatar: value.id\n      });\n    } else {\n      // Clear avatar\n      return removeAvatar(userId, api);\n    }\n  }\n\n  return api.update('me', payload);\n}\n\nasync function removeAvatar(userId, api) {\n  const url = `/users/${userId}`;\n  const user = await api.get(url, {\n    fields: ':owner'\n  });\n  delete user.avatar;\n  return api.update(url, user);\n}\n\nexport default userProfileActions;","import React from 'react';\nimport FormFields from '../layout/FormFields.component';\nimport i18n from '../locales';\nimport userProfileActions from '../profile/profile.actions';\nimport userProfileStore from '../profile/profile.store';\n\nfunction EditProfile() {\n  const fieldKeys = ['accountEditor'];\n  const pageLabel = i18n.t('Edit account settings');\n  return /*#__PURE__*/React.createElement(FormFields, {\n    pageLabel: pageLabel,\n    fieldKeys: fieldKeys,\n    valueStore: userProfileStore,\n    onUpdateField: userProfileActions.save\n  });\n}\n\nexport default EditProfile;","import { FlatButton, Dialog } from 'material-ui';\nimport React from 'react';\nimport appActions from '../app.actions';\nimport i18n from '../locales'; // In development environments this won't provide the correct behavior\n// because the app is hosted on a different port, but once an app is deployed\n// reloading the window with an invalidated session will redirect to the login page\n\nconst reload = () => {\n  appActions.setCategory('account');\n  window.location.reload(true);\n};\n\nfunction PasswordChangeSuccessDialog() {\n  const titleText = i18n.t('Password changed successfully');\n  const bodyText = i18n.t('You need to login again to continue using the application.');\n  const buttonText = i18n.t('Login');\n  const buttons = [/*#__PURE__*/React.createElement(FlatButton, {\n    label: buttonText,\n    primary: true,\n    onClick: reload,\n    key: buttonText\n  })];\n  return /*#__PURE__*/React.createElement(Dialog, {\n    title: titleText,\n    actions: buttons,\n    modal: true,\n    open: true\n  }, bodyText);\n}\n\nexport default PasswordChangeSuccessDialog;","import { Paper } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport profileSettingsStore from '../../profile/profile.store';\nconst styles = {\n  qrCodePaperWrapper: {\n    padding: '1rem 0 0'\n  },\n  qrCodePaper: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    padding: '1rem'\n  },\n  qrCode: {\n    padding: '1rem'\n  }\n};\n\nconst QRCode = ({\n  open\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.qrCodePaperWrapper\n}, open && /*#__PURE__*/React.createElement(Paper, {\n  style: styles.qrCodePaper\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.statusMessage\n}, /*#__PURE__*/React.createElement(\"b\", null, i18n.t('Barcode/QR code to scan'))), /*#__PURE__*/React.createElement(\"img\", {\n  style: styles.qrCode,\n  alt: \"qrCode\",\n  src: profileSettingsStore.state.qrCodeUrl\n})));\n\nQRCode.propTypes = {\n  open: PropTypes.bool.isRequired\n};\nexport default QRCode;","export default {\n  DEFAULT: 0,\n  ANDROID: 1,\n  IPHONE: 2\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../../locales';\nimport phoneTypes from './phoneTypes';\nconst playStoreLink = /*#__PURE__*/React.createElement(\"a\", {\n  href: \"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2\",\n  rel: \"noopener\"\n}, \"Play store.\");\nconst appStoreLink = /*#__PURE__*/React.createElement(\"a\", {\n  href: \"https://itunes.apple.com/no/app/google-authenticator/id388497605?mt=8\",\n  rel: \"noreferrer\"\n}, \"App store.\");\nconst styles = {\n  phoneTypeInstructions: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between'\n  },\n  instructionItem: {\n    marginBottom: 10\n  }\n};\n\nconst PhoneTypeInstructions = ({\n  phoneType\n}) => phoneType !== phoneTypes.DEFAULT && /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.phoneTypeInstructions\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.instructionItem\n}, /*#__PURE__*/React.createElement(\"b\", null, \"1. \"), `${i18n.t('Download the Authenticator App from the ')} `, phoneType === phoneTypes.ANDROID && playStoreLink, phoneType === phoneTypes.IPHONE && appStoreLink), /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.instructionItem\n}, /*#__PURE__*/React.createElement(\"b\", null, \"2. \"), `${i18n.t('In the Authenticator App select ')} `, /*#__PURE__*/React.createElement(\"b\", null, i18n.t('Begin setup.'))), /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.instructionItem\n}, /*#__PURE__*/React.createElement(\"b\", null, \"3. \"), `${i18n.t('Choose ')} `, /*#__PURE__*/React.createElement(\"b\", null, i18n.t('Scan a barcode.'))));\n\nPhoneTypeInstructions.propTypes = {\n  phoneType: PropTypes.number.isRequired\n};\nexport default PhoneTypeInstructions;","import { RadioButtonGroup, RadioButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport phoneTypes from './phoneTypes';\nconst styles = {\n  radioGroup: {\n    marginTop: '1rem',\n    marginBottom: '1rem'\n  },\n  radioButton: {\n    marginBottom: 5\n  }\n};\n\nconst RadioButtons = ({\n  setPhoneType\n}) => /*#__PURE__*/React.createElement(RadioButtonGroup, {\n  name: \"phoneType\",\n  style: styles.radioGroup,\n  onChange: setPhoneType\n}, /*#__PURE__*/React.createElement(RadioButton, {\n  value: phoneTypes.ANDROID,\n  label: \"Android\",\n  style: styles.radioButton\n}), /*#__PURE__*/React.createElement(RadioButton, {\n  value: phoneTypes.IPHONE,\n  label: \"Iphone/Ipad\",\n  style: styles.radioButton\n}));\n\nRadioButtons.propTypes = {\n  setPhoneType: PropTypes.func.isRequired\n};\nexport default RadioButtons;","import { Paper } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../../locales';\nimport PhoneTypeInstructions from './PhoneTypeInstructions';\nimport RadioButtons from './RadioButtons';\nconst styles = {\n  downloadGuideWrapper: {\n    display: 'flex',\n    flexDirection: 'row',\n    padding: '1rem'\n  },\n  authIcon: {\n    height: '2em',\n    width: '2em',\n    marginRight: '1rem'\n  },\n  downloadGuide: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  authDownloadHeader: {\n    fontWeight: 500,\n    marginTop: '0.4rem',\n    marginBottom: '1rem'\n  }\n};\n\nconst DownloadGuide = ({\n  phoneType,\n  onPhoneTypeChange\n}) => /*#__PURE__*/React.createElement(Paper, {\n  style: styles.downloadGuideWrapper\n}, /*#__PURE__*/React.createElement(\"img\", {\n  style: styles.authIcon,\n  alt: \"authIcon\",\n  src: \"auth.png\"\n}), /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.downloadGuide\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.authDownloadHeader\n}, i18n.t('Download the Authenticator app')), /*#__PURE__*/React.createElement(\"div\", null, i18n.t('What kind of phone/tablet do you have?'), /*#__PURE__*/React.createElement(RadioButtons, {\n  setPhoneType: onPhoneTypeChange\n}), /*#__PURE__*/React.createElement(PhoneTypeInstructions, {\n  phoneType: phoneType\n}))));\n\nDownloadGuide.propTypes = {\n  phoneType: PropTypes.number.isRequired,\n  onPhoneTypeChange: PropTypes.func.isRequired\n};\nexport default DownloadGuide;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport i18n from '../../../locales';\nimport DownloadGuide from './DownloadGuide';\nimport phoneTypes from './phoneTypes';\nconst styles = {\n  guideHeader: {\n    fontWeight: 300,\n    padding: '24px 16px 24px 16px'\n  }\n};\n\nclass SetupGuide extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      phoneType: phoneTypes.DEFAULT\n    });\n\n    _defineProperty(this, \"setPhoneType\", (event, value) => this.setState({\n      phoneType: value\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, this.props.open && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.guideHeader\n    }, i18n.t('With 2-Factor authentication turned on you will be asked to enter a second verification code when you log in. To generate this verification code you must use the Authenticator app. If you do not have this app you must download it on your phone/tablet.')), /*#__PURE__*/React.createElement(DownloadGuide, {\n      phoneType: this.state.phoneType,\n      onPhoneTypeChange: this.setPhoneType\n    })));\n  }\n\n}\n\nSetupGuide.propTypes = {\n  open: PropTypes.bool.isRequired\n};\nexport default SetupGuide;","import { Paper, RaisedButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst styles = {\n  status: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: '1rem',\n    padding: '0 1rem'\n  },\n  statusButton: {\n    margin: '1rem'\n  },\n  statusMessage: {\n    margin: '1rem'\n  }\n};\n\nconst Status2FA = ({\n  openSetupDialog,\n  statusMessage,\n  buttonLabel\n}) => /*#__PURE__*/React.createElement(Paper, {\n  style: styles.status\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.statusMessage\n}, statusMessage), /*#__PURE__*/React.createElement(RaisedButton, {\n  style: styles.statusButton,\n  label: buttonLabel,\n  onClick: openSetupDialog,\n  primary: true\n}));\n\nStatus2FA.propTypes = {\n  buttonLabel: PropTypes.string.isRequired,\n  openSetupDialog: PropTypes.func.isRequired,\n  statusMessage: PropTypes.string.isRequired\n};\nexport default Status2FA;","import { FlatButton, Dialog } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\n\nconst Status2FAChangeDialog = ({\n  closeSetupDialog,\n  handleDialogAnswer,\n  dialogOpened,\n  dialogTitle\n}) => {\n  const buttons = [/*#__PURE__*/React.createElement(FlatButton, {\n    label: i18n.t('No'),\n    primary: true,\n    onClick: closeSetupDialog,\n    key: \"no\"\n  }), /*#__PURE__*/React.createElement(FlatButton, {\n    label: i18n.t('Yes'),\n    primary: true,\n    onClick: handleDialogAnswer,\n    key: \"yes\"\n  })];\n  return /*#__PURE__*/React.createElement(Dialog, {\n    title: dialogTitle,\n    actions: buttons,\n    modal: true,\n    open: dialogOpened\n  });\n};\n\nStatus2FAChangeDialog.propTypes = {\n  closeSetupDialog: PropTypes.func.isRequired,\n  dialogOpened: PropTypes.bool.isRequired,\n  dialogTitle: PropTypes.string.isRequired,\n  handleDialogAnswer: PropTypes.func.isRequired\n};\nexport default Status2FAChangeDialog;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport i18n from '../../locales';\nimport profileSettingsStore from '../../profile/profile.store';\nimport accountActions from '../account.actions';\nimport QRCode from './QRCode';\nimport SetupGuide from './setup-guide/SetupGuide.component';\nimport Status2FA from './Status2FA';\nimport Status2FAChangeDialog from './Status2FAChangeDialog';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    padding: '24px 0 12px 16px'\n  }\n};\n\nclass TwoFactor extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      canRender: false,\n      isTwoFactorOn: false,\n      dialogOpened: false\n    });\n\n    _defineProperty(this, \"closeSetupDialog\", () => this.setState({\n      dialogOpened: false\n    }));\n\n    _defineProperty(this, \"openSetupDialog\", () => this.setState({\n      dialogOpened: true\n    }));\n\n    _defineProperty(this, \"changeTwoFactorStatus\", () => {\n      this.setState({\n        isTwoFactorOn: !this.state.isTwoFactorOn\n      }, () => {\n        accountActions.setTwoFactorStatus(this.state.isTwoFactorOn);\n      });\n    });\n\n    _defineProperty(this, \"handleDialogAnswer\", () => {\n      this.changeTwoFactorStatus();\n      this.closeSetupDialog();\n    });\n  }\n\n  componentDidMount() {\n    const status = profileSettingsStore.state.twoFA;\n    this.setState({\n      isTwoFactorOn: status,\n      canRender: true\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-area\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, \"2 Factor\"), this.state.canRender && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Status2FA, {\n      isTwoFactorOn: this.state.isTwoFactorOn,\n      openSetupDialog: this.openSetupDialog,\n      buttonLabel: this.state.isTwoFactorOn ? i18n.t('Turn OFF') : i18n.t('Turn ON'),\n      statusMessage: this.state.isTwoFactorOn ? i18n.t('2-Factor Verification is ON') : i18n.t('2-Factor Verification is OFF')\n    }), /*#__PURE__*/React.createElement(Status2FAChangeDialog, {\n      dialogTitle: this.state.isTwoFactorOn ? i18n.t('Do you want to turn OFF 2-Factor?') : i18n.t('Do you want to turn ON 2-Factor?'),\n      closeSetupDialog: this.closeSetupDialog,\n      handleDialogAnswer: this.handleDialogAnswer,\n      dialogOpened: this.state.dialogOpened\n    }), /*#__PURE__*/React.createElement(SetupGuide, {\n      open: this.state.isTwoFactorOn\n    }), /*#__PURE__*/React.createElement(QRCode, {\n      open: this.state.isTwoFactorOn\n    })));\n  }\n\n}\n\nexport default TwoFactor;","import Sidebar from 'd2-ui/lib/sidebar/Sidebar.component';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\n\nfunction SidebarWrapper(props) {\n  const sideBarSections = [{\n    key: 'profile',\n    label: i18n.t('Edit user profile'),\n    icon: 'create'\n  }, {\n    key: 'settings',\n    label: i18n.t('Edit user settings'),\n    icon: 'build'\n  }, {\n    key: 'account',\n    label: i18n.t('Edit account settings'),\n    icon: 'settings'\n  }, {\n    key: 'viewProfile',\n    label: i18n.t('View full profile'),\n    icon: 'face'\n  }, {\n    key: 'aboutPage',\n    label: i18n.t('About DHIS2'),\n    icon: 'public'\n  }];\n  return /*#__PURE__*/React.createElement(Sidebar, {\n    sections: sideBarSections,\n    onChangeSection: appActions.setCategory,\n    currentSection: props.currentSection\n  });\n}\n\nSidebarWrapper.propTypes = {\n  currentSection: PropTypes.string\n};\nSidebarWrapper.defaultProps = {\n  currentSection: 'profile'\n};\nexport default SidebarWrapper;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Snackbar from 'material-ui/Snackbar';\nimport React, { Component } from 'react';\nimport appActions from '../app.actions';\nconst messageStatus = {\n  warning: {\n    backgroundColor: '#FFA726'\n  },\n  error: {\n    backgroundColor: '#EF5350'\n  },\n  neutral: {\n    backgroundColor: 'black'\n  },\n  success: {\n    backgroundColor: '#9CCC65'\n  }\n};\nconst DEFAULT_AUTOHIDE_DURATION = 1250;\n\nclass SnackWrapper extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      snackbarMessage: '',\n      showSnackbar: false,\n      messageStatus: messageStatus['neutral'],\n      autoHideDuration: DEFAULT_AUTOHIDE_DURATION\n    });\n\n    _defineProperty(this, \"closeSnackbar\", () => {\n      this.setState({\n        showSnackbar: false\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.subscriptions = [];\n    this.subscriptions.push(appActions.showSnackbarMessage.subscribe(params => {\n      const message = params.data.message;\n      const status = params.data.status ? params.data.status : 'neutral';\n      const autoHideDuration = params.data.permanent ? undefined : DEFAULT_AUTOHIDE_DURATION;\n      this.setState({\n        snackbarMessage: message,\n        showSnackbar: !!message,\n        messageStatus: messageStatus[status],\n        autoHideDuration\n      });\n    }));\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach(sub => {\n      sub.unsubscribe();\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Snackbar, {\n      message: this.state.snackbarMessage,\n      autoHideDuration: this.state.autoHideDuration,\n      bodyStyle: this.state.messageStatus,\n      open: this.state.showSnackbar,\n      onRequestClose: this.closeSnackbar\n    });\n  }\n\n}\n\nexport default SnackWrapper;","import React from 'react';\nimport FormFields from '../layout/FormFields.component';\nimport i18n from '../locales';\nimport userProfileActions from './profile.actions';\nimport userProfileStore from './profile.store';\n\nfunction EditProfile() {\n  const fieldKeys = ['firstName', 'surname', 'email', 'avatar', 'phoneNumber', 'introduction', 'jobTitle', 'gender', 'birthday', 'nationality', 'employer', 'education', 'interests', 'languages', 'whatsApp', 'facebookMessenger', 'skype', 'telegram', 'twitter'];\n  const pageLabel = i18n.t('Edit user profile');\n  return /*#__PURE__*/React.createElement(FormFields, {\n    pageLabel: pageLabel,\n    fieldKeys: fieldKeys,\n    valueStore: userProfileStore,\n    onUpdateField: userProfileActions.save\n  });\n}\n\nexport default EditProfile;","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport log from 'loglevel';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\nimport userSettingsStore from './userSettings.store';\nconst userSettingsActions = Action.createActionsFromNames(['save']);\nuserSettingsActions.save.subscribe(({\n  data,\n  complete,\n  error\n}) => {\n  const key = data[0];\n  const value = data[1] === 'null' || data[1] === 'system_default' ? null : data[1];\n  getD2().then(d2 => {\n    d2.currentUser.userSettings.set(key, value).then(() => {\n      userSettingsStore.state[key] = value;\n      userSettingsStore.setState(userSettingsStore.state);\n      log.debug('User Setting updated successfully.');\n      appActions.showSnackbarMessage({\n        message: i18n.t('Settings updated'),\n        status: 'success'\n      });\n      complete();\n    }).catch(err => {\n      userSettingsStore.setState(userSettingsStore.state);\n      log.warn('API call failed:', err);\n      appActions.showSnackbarMessage({\n        message: i18n.t('Failed to update settings'),\n        status: 'error'\n      });\n      error();\n    });\n  });\n});\nexport default userSettingsActions;","import React from 'react';\nimport FormFields from '../layout/FormFields.component';\nimport i18n from '../locales';\nimport userSettingsActions from './userSettings.actions';\nimport userSettingsStore from './userSettings.store';\n\nfunction EditProfile() {\n  const fieldKeys = ['keyUiLocale', 'keyDbLocale', 'keyStyle', 'keyAnalysisDisplayProperty', 'keyMessageEmailNotification', 'keyMessageSmsNotification'];\n  const pageLabel = i18n.t('Edit user settings');\n  return /*#__PURE__*/React.createElement(FormFields, {\n    pageLabel: pageLabel,\n    fieldKeys: fieldKeys,\n    valueStore: userSettingsStore,\n    onUpdateField: userSettingsActions.save\n  });\n}\n\nexport default EditProfile;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card, CardText } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport settingsKeyMapping from '../userSettingsMapping';\nimport InfoHeader from './InfoHeader.component';\nimport InfoRow from './InfoRow.component';\nconst styles = {\n  card: {\n    marginTop: 8,\n    marginRight: '1rem',\n    padding: '0 1rem'\n  }\n};\n\nclass InfoCard extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      canRender: false\n    });\n  }\n\n  componentDidMount() {\n    Promise.all([this.props.valueStore.state.getUserRoles(), this.props.valueStore.state.getOrganisationUnits()]).then(response => {\n      this.userRoles = response[0];\n      this.userOrgUnits = response[1];\n      this.setState({\n        canRender: true\n      });\n    });\n  }\n\n  getUserOrgUnitsValue() {\n    const userOrgUnitsValues = [];\n    this.userOrgUnits.valuesContainerMap.forEach(value => userOrgUnitsValues.push(value.name));\n    return userOrgUnitsValues.join(', ');\n  }\n\n  getUserRolesValue() {\n    const userRolesValues = [];\n    this.userRoles.valuesContainerMap.forEach(value => userRolesValues.push(value.name));\n    return userRolesValues.join(', ');\n  }\n\n  getOptionTypeValue(labelName) {\n    const value = this.props.valueStore.state[labelName];\n    return value || value === false ? settingsKeyMapping[labelName].options[value] : 'null';\n  }\n\n  getBirthdayDateValue(dateValue) {\n    const birthday = new Date(dateValue); // Silly Date class gives day of month from getDate() and getMonth() is based from 0-11.\n    // TODO: Use locale date formatting\n\n    return birthday.getDate() + '-' + (birthday.getMonth() + 1) + '-' + birthday.getFullYear();\n  }\n\n  getLabelValue(labelName, type) {\n    if (!this.labelExists(labelName, type)) {\n      return '';\n    }\n\n    const labelValue = String(this.props.valueStore.state[labelName]).trim();\n\n    switch (type) {\n      case 'textfield':\n        return labelValue;\n\n      case 'date':\n        return this.getBirthdayDateValue(this.props.valueStore.state[labelName]);\n\n      case 'dropdown':\n        return this.getOptionTypeValue(labelName);\n\n      case 'userOrgUnits':\n        return this.getUserOrgUnitsValue();\n\n      case 'userRoles':\n        return this.getUserRolesValue();\n\n      default:\n        return `${labelValue} value not found`;\n    }\n  }\n\n  getLabelComponent(labelName) {\n    const mapping = settingsKeyMapping[labelName];\n    const translatedLabelName = mapping.label;\n    const labelValue = this.getLabelValue(labelName, mapping.type);\n    return /*#__PURE__*/React.createElement(InfoRow, {\n      key: translatedLabelName,\n      label: translatedLabelName,\n      value: labelValue\n    });\n  }\n\n  getLabelComponents(labelNames) {\n    const labelComponents = labelNames.map(labelName => this.getLabelComponent(labelName));\n    return labelComponents;\n  }\n\n  labelExists(labelName, type) {\n    return this.props.valueStore.state && Object.prototype.hasOwnProperty.call(this.props.valueStore.state, labelName) || type === 'userRoles' || type === 'userOrgUnits';\n  }\n\n  renderLabels(labelNames) {\n    return /*#__PURE__*/React.createElement(Card, {\n      style: styles.card\n    }, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"info-content\"\n    }, /*#__PURE__*/React.createElement(\"tbody\", null, this.getLabelComponents(labelNames)))));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-area\"\n    }, /*#__PURE__*/React.createElement(InfoHeader, {\n      text: this.props.pageLabel\n    }), this.state.canRender && this.renderLabels(this.props.labelKeys));\n  }\n\n}\n\nInfoCard.propTypes = {\n  labelKeys: PropTypes.arrayOf(PropTypes.string).isRequired,\n  pageLabel: PropTypes.string.isRequired,\n  valueStore: PropTypes.object.isRequired\n};\nexport default InfoCard;","import React from 'react';\nimport InfoCard from '../layout/InfoCard.component';\nimport i18n from '../locales';\nimport profileSettingsStore from '../profile/profile.store';\n\nfunction ViewProfile() {\n  const labelKeys = ['firstName', 'surname', 'gender', 'email', 'phoneNumber', 'introduction', 'birthday', 'nationality', 'employer', 'jobTitle', 'userRoles', 'userOrgUnits', 'education', 'interests', 'languages'];\n  const pageLabel = i18n.t('View full profile');\n  return /*#__PURE__*/React.createElement(InfoCard, {\n    pageLabel: pageLabel,\n    labelKeys: labelKeys,\n    valueStore: profileSettingsStore\n  });\n}\n\nexport default ViewProfile;","import { DataProvider } from '@dhis2/app-runtime';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Router, Route, hashHistory, Redirect } from 'react-router';\nimport AboutPage from './aboutPage/AboutPage.component';\nimport Account from './account/Account.component';\nimport PasswordChangeSuccessDialog from './account/PasswordChangeSuccessDialog';\nimport TwoFactor from './account/twoFactor/TwoFactor';\nimport Sidebar from './layout/Sidebar.component';\nimport Snackbar from './layout/Snackbar.component';\nimport AppTheme from './layout/theme';\nimport Profile from './profile/Profile.component';\nimport UserSettings from './settings/UserSettings.component';\nimport ViewProfile from './viewProfile/ViewProfile.component';\n\nfunction WrAppadApp(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrap\"\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    currentSection: props.routes[1].path\n  }), props.children);\n}\n\nWrAppadApp.propTypes = {\n  children: PropTypes.any.isRequired,\n  routes: PropTypes.array.isRequired\n};\n\nclass AppRouter extends Component {\n  getChildContext() {\n    return {\n      d2: this.props.d2,\n      muiTheme: AppTheme\n    };\n  }\n\n  getDataProviderProps() {\n    const baseUrl = this.props.d2.system.systemInfo.contextPath;\n    const apiUrl = this.props.d2.system.settings.api.baseUrl;\n    const versionString = apiUrl.split('/').pop();\n    const apiVersion = isNaN(parseInt(versionString, 10)) ? '' : versionString;\n    return {\n      baseUrl,\n      apiVersion\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(DataProvider, this.getDataProviderProps(), /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      muiTheme: AppTheme\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\"\n    }, /*#__PURE__*/React.createElement(Snackbar, null), /*#__PURE__*/React.createElement(Router, {\n      history: hashHistory\n    }, /*#__PURE__*/React.createElement(Route, {\n      component: WrAppadApp\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"settings\",\n      component: UserSettings\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"profile\",\n      component: Profile\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"account\",\n      component: Account\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"twoFactor\",\n      component: TwoFactor\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"passwordChanged\",\n      component: PasswordChangeSuccessDialog\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"viewProfile\",\n      component: ViewProfile\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"aboutPage\",\n      component: AboutPage\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      from: \"/\",\n      to: \"/viewProfile\"\n    }))))));\n  }\n\n}\n\nAppRouter.propTypes = {\n  d2: PropTypes.object.isRequired\n};\nAppRouter.childContextTypes = {\n  d2: PropTypes.object,\n  muiTheme: PropTypes.object\n};\nexport default AppRouter;","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport log from 'loglevel';\nimport React from 'react';\nimport AppRouter from './app.router.js';\nimport optionValueStore from './optionValue.store';\nimport userProfileStore from './profile/profile.store';\nimport userSettingsStore from './settings/userSettings.store';\nimport './locales';\nimport './layout/app.css';\nimport 'material-design-icons-iconfont/dist/material-design-icons.css';\n\nconst AppWrapper = () => {\n  const {\n    d2\n  } = useD2({\n    onInitialized: d2 => {\n      const api = d2.Api.getApi();\n      return Promise.all([api.get('system/styles'), api.get('locales/ui'), api.get('locales/db'), api.get('userSettings', {\n        useFallback: false\n      }), d2.system.settings.all(), api.get('2fa/qr')]).then(results => {\n        const styles = (results[0] || []).map(style => ({\n          id: style.path,\n          displayName: style.name\n        }));\n        const uiLocales = (results[1] || []).map(locale => ({\n          id: locale.locale,\n          displayName: locale.name\n        }));\n        const dbLocales = (results[2] || []).map(locale => ({\n          id: locale.locale,\n          displayName: locale.name\n        }));\n        const systemDefault = { ...results[4]\n        };\n        userProfileStore.setState(d2.currentUser);\n        userProfileStore.state.qrCodeUrl = results[5].url;\n        userSettingsStore.setState(results[3]);\n        optionValueStore.setState({\n          styles,\n          uiLocales,\n          dbLocales,\n          systemDefault\n        });\n        log.debug('Current user profile loaded:', userProfileStore.state);\n        log.debug('Current user settings loaded:', userSettingsStore.state);\n      }, error => {\n        log.error('Failed to load user settings:', error);\n      });\n    }\n  });\n\n  if (!d2) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(AppRouter, {\n    d2: d2\n  });\n};\n\nexport default AppWrapper;"],"sourceRoot":""}