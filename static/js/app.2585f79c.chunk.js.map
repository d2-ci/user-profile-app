{"version":3,"sources":["D2App/personalAccessTokens/generateTokenModal/AuthoritiesWarning.module.css","D2App/personalAccessTokens/generateTokenModal/AllowedMethodsFF.module.css","D2App/personalAccessTokens/generateTokenModal/ExpirationDateFF.module.css","D2App/personalAccessTokens/generateTokenModal/ContextSelector.module.css","D2App/personalAccessTokens/PersonalAccessTokens.module.css","D2App/personalAccessTokens/tokenCard/ExistingToken.module.css","D2App/personalAccessTokens/tokenCard/NewToken.module.css","D2App/personalAccessTokens/tokenCard/TokenCard.module.css","D2App/personalAccessTokens/TokensList.module.css","D2App/locales/index.js","D2App/layout/theme.js","D2App/layout/InfoHeader.component.js","D2App/layout/InfoRow.component.js","D2App/aboutPage/AboutSection.component.js","D2App/aboutPage/AboutPage.component.js","D2App/optionValue.store.js","D2App/profile/profile.store.js","D2App/settings/userSettings.store.js","D2App/app.actions.js","D2App/account/account.actions.js","D2App/account/isValidPassword.js","D2App/account/AccountEditor.component.js","D2App/userSettingsMapping.js","D2App/layout/AvatarEditor.component.js","D2App/layout/FormFields.component.js","D2App/profile/isValidWhatsApp.js","D2App/profile/profile.actions.js","D2App/account/Account.component.js","D2App/account/PasswordChangeSuccessDialog.js","D2App/account/twoFactor/QRCode.js","D2App/account/twoFactor/setup-guide/phoneTypes.js","D2App/account/twoFactor/setup-guide/PhoneTypeInstructions.js","D2App/account/twoFactor/setup-guide/RadioButtons.js","D2App/account/twoFactor/setup-guide/DownloadGuide.js","D2App/account/twoFactor/setup-guide/SetupGuide.component.js","D2App/account/twoFactor/Status2FA.js","D2App/account/twoFactor/Status2FAChangeDialog.js","D2App/account/twoFactor/TwoFactor.js","D2App/layout/Sidebar.component.js","D2App/layout/Snackbar.component.js","D2App/personalAccessTokens/generateTokenModal/AuthoritiesWarning.component.js","D2App/personalAccessTokens/generateTokenModal/AllowedMethodsFF.component.js","D2App/personalAccessTokens/generateTokenModal/AllowedReferrersFF.component.js","D2App/personalAccessTokens/generateTokenModal/getTokenExpirationDate.js","D2App/personalAccessTokens/generateTokenModal/ExpirationDateFF.component.js","D2App/personalAccessTokens/generateTokenModal/BrowserForm.component.js","D2App/personalAccessTokens/generateTokenModal/ContextSelector.component.js","D2App/personalAccessTokens/generateTokenModal/AllowedIpsFF.component.js","D2App/personalAccessTokens/generateTokenModal/ServerForm.component.js","D2App/personalAccessTokens/generateTokenModal/GenerateTokenModal.component.js","D2App/personalAccessTokens/use-modal.js","D2App/personalAccessTokens/tokenCard/ConfirmDeleteModal.component.js","D2App/personalAccessTokens/tokenCard/TokenPropType.js","D2App/personalAccessTokens/tokenCard/ExistingToken.component.js","D2App/personalAccessTokens/tokenCard/NewToken.component.js","D2App/personalAccessTokens/tokenCard/TokenCard.component.js","D2App/personalAccessTokens/TokensList.component.js","D2App/personalAccessTokens/PersonalAccessTokens.component.js","D2App/profile/Profile.component.js","D2App/settings/userSettings.actions.js","D2App/settings/UserSettings.component.js","D2App/layout/InfoCard.component.js","D2App/viewProfile/ViewProfile.component.js","D2App/app.router.js","D2App/AppWrapper.js","D2App/personalAccessTokens/generateTokenModal/Form.module.css"],"names":["module","exports","namespace","i18n","addResources","arTranslations","ar_IQTranslations","bnTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","hi_INTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","neTranslations","nlTranslations","orTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","theme","spacing","Spacing","fontFamily","palette","primary1Color","blue500","primary2Color","blue700","primary3Color","blue100","accent1Color","orange500","accent2Color","grey100","accent3Color","grey500","textColor","darkBlack","alternateTextColor","white","canvasColor","borderColor","grey400","disabledColor","fade","muiTheme","getMuiTheme","Object","assign","forms","minWidth","maxWidth","formInput","fontWeight","styles","header","fontSize","color","AppTheme","rawTheme","padding","InfoHeader","text","React","createElement","style","InfoRow","label","value","labelStyle","className","defaultProps","card","marginTop","marginRight","AboutSection","attributes","Card","CardText","map","key","toString","_defineProperty","obj","defineProperty","enumerable","configurable","writable","parseDateFromUTCString","utcString","d2","hideIfEmpty","undefined","t","locale","currentUser","userSettings","settings","keyUiLocale","date","Date","options","day","month","year","hour","minute","hour12","Intl","DateTimeFormat","format","error","systemInfo","getDisplayValue","_value","target","rel","href","system","contextPath","username","databaseInfo","AboutPage","Component","constructor","args","super","this","selected","source","reduce","acc","attribute","context","push","getAttributes","length","contextTypes","PropTypes","object","isRequired","Store","create","appActions","Action","createActionsFromNames","init","subscribe","getD2","then","api","Api","getApi","Promise","all","get","useFallback","results","id","path","displayName","name","uiLocales","dbLocales","systemDefault","keys","defaults","userProfileStore","setState","state","qrCodeUrl","url","userSettingsStore","optionValueStore","log","debug","ReactDOM","render","AppRouter","document","querySelector","setCategory","data","hashHistory","accountActions","setPassword","oldPassword","newPassword","onSuccess","complete","payload","update","catch","err","message","showSnackbarMessage","status","permanent","setTwoFactorStatus","twoFA","userCredentials","getQrCode","oneDigit","oneUpperCase","oneSpecialCharacter","isValidPassword","test","notification","border","backgroundColor","AccountEditor","props","String","trim","reNewPassword","formState","formBuilder","form","pristine","validating","valid","isNotEmpty","clearRepeatPassword","e","v","wrongOldPasswordText","usesOpenIdConnect","externalAuth","fields","component","TextField","floatingLabelText","width","disabled","type","changeEvent","autoComplete","validators","validator","isSamePassword","FlatButton","onClick","openTwoFactorDialog","secondary","RaisedButton","updatePassword","Fragment","FormBuilder","onUpdateField","updateState","ref","r","settingsKeyMapping","firstName","surname","avatar","gender","gender_male","gender_female","gender_other","email","phoneNumber","introduction","multiLine","jobTitle","userRoles","userOrgUnits","birthday","nationality","employer","education","interests","languages","whatsApp","facebookMessenger","skype","telegram","twitter","accountEditor","showSystemDefault","keyDbLocale","keyStyle","keyAnalysisDisplayProperty","shortName","keyMessageEmailNotification","true","false","keyMessageSmsNotification","AvatarEditor","_optionValueStore$sta","_optionValueStore$sta2","inputRef","node","async","onChange","file","event","files","maxSize","maxPhotoSize","size","userSettingsActions","loading","formData","FormData","append","imageId","post","response","fileResource","avatarSrc","parseAvatarSrc","console","getInputRef","keyMaxAvatarSizeInMB","userId","avatarId","baseUrl","renderAvatar","src","alt","renderPlaceholder","CircularProgress","containerElement","icon","FileUpload","primary","onFileSelect","display","accept","setInputRef","ActionDelete","onRemoveIcon","cardTitle","background","height","cardTitleText","noHits","userSettingsOverride","menuIcon","menuLabel","position","top","marginLeft","translateValidatorMessage","validatorMessage","createFieldBaseObject","fieldName","mapping","valueStore","hintText","valueString","prototype","hasOwnProperty","call","propsObject","baseValidators","wordToValidatorMap","has","getNameValidator","filter","createField","userSettingsKeyMapping","fieldBase","createTextField","DatePicker","dateFormat","keyDateFormat","textFieldStyle","allowFuture","createDateField","Checkbox","checked","saveUserKey","createCheckBox","menuItems","slice","systemSettingValue","systemSettingLabel","x","unshift","SelectField","includeEmpty","emptyLabel","noOptionsLabel","createDropDown","createAccountEditor","createAvatarEditor","warn","FormFields","componentDidMount","disposable","forceUpdate","componentWillUnmount","unsubscribe","renderFields","fieldNames","field","systemValue","actualSystemValue","systemValueLabel","find","item","systemDefaultLabel","WrappedComponent","wrapFieldWithLabel","pageLabel","fieldKeys","PHONE_PATTERN","isValidWhatsApp","set","userProfileActions","save","toISOString","Array","isArray","prev","curr","patch","user","removeAvatar","getProfileUpdatePromise","EditProfile","reload","window","location","PasswordChangeSuccessDialog","titleText","bodyText","buttonText","buttons","Dialog","title","actions","modal","open","qrCodePaperWrapper","qrCodePaper","flexDirection","justifyContent","alignItems","qrCode","QRCode","Paper","statusMessage","profileSettingsStore","playStoreLink","appStoreLink","phoneTypeInstructions","instructionItem","marginBottom","PhoneTypeInstructions","phoneType","phoneTypes","radioGroup","radioButton","RadioButtons","setPhoneType","RadioButtonGroup","RadioButton","downloadGuideWrapper","authIcon","downloadGuide","authDownloadHeader","DownloadGuide","onPhoneTypeChange","guideHeader","SetupGuide","statusButton","margin","Status2FA","openSetupDialog","buttonLabel","Status2FAChangeDialog","closeSetupDialog","handleDialogAnswer","dialogOpened","dialogTitle","TwoFactor","canRender","isTwoFactorOn","changeTwoFactorStatus","SidebarWrapper","sideBarSections","Sidebar","sections","onChangeSection","currentSection","messageStatus","warning","neutral","success","SnackWrapper","snackbarMessage","showSnackbar","autoHideDuration","subscriptions","params","forEach","sub","Snackbar","bodyStyle","onRequestClose","closeSnackbar","query","authorities","resource","AuthoritiesWarning","refetch","useDataQuery","CenteredContent","CircularLoader","small","NoticeBox","noticeBox","Button","authority","AllowedMethodsFF","ReactFinalForm","Field","CheckboxFieldFF","initialValue","helpText","isValidUrl","parsedUrl","URL","includes","protocol","referrerValidator","referrers","split","referrer","AllowedReferrersFF","TextAreaFieldFF","rows","validate","getTokenExpirationDate","today","moment","add","Error","futureDateValidator","expirationTimeOptions","renderExpirationDate","tokenExpirationDate","ExpirationDateFF","values","container","required","SingleSelectFieldFF","hasValue","flex","InputFieldFF","composeValidators","BrowserForm","fieldWithExplanation","explanation","IconWarning16","nsSeparator","Context","children","onSelect","selectedContext","Radio","dense","contextTitle","contextDescription","ContextSelector","setContext","contexts","isValidIpAddress","ipAddress","ipRegex","exact","ipAddresesValidator","ipAddresses","AllowedIpsFF","ServerForm","generateTokenMutation","getExpire","formParams","expirationDate","customExpirationDate","Number","getAllowedIpsAttribute","allowedIps","getAllowedMethodsAttribute","allowedMethodsGET","allowedMethodsPOST","allowedMethodsPUT","allowedMethodsPATCH","allowedMethodsDELETE","allowedMethods","am","getAllowedReferersAttribute","allowedReferrers","GenerateTokenModal","onGenerate","onClose","errorAlert","useAlert","critical","generateToken","useDataMutation","onComplete","uid","onError","show","useState","Modal","large","ModalTitle","Form","onSubmit","confirm","expire","a","handleSubmit","ModalContent","formStyles","renderContext","ModalActions","ButtonStrip","end","useModal","isVisible","setIsVisible","hide","mutation","ConfirmDeleteModal","tokenId","onDelete","deleteToken","destructive","shape","array","createdAt","instanceOf","expiresAt","string","getAttribute","RelativeDateTime","dateTime","Tooltip","content","fromNow","Item","singleLine","singleLineItem","itemTitle","itemValue","ExistingToken","token","items","method","Tag","positive","allowedList","ip","NewToken","copiedAlert","navigator","clipboard","writeText","IconCopy16","TokenCard","confirmDeleteModal","newToken","tokenData","TokensList","tokens","some","copyTokenNotice","list","paging","PersonalAccessTokens","tokenKeys","setTokenKeys","Map","variables","generateTokenModal","apiToken","created","heading","cardWrapper","InfoCard","getUserRoles","getOrganisationUnits","getUserOrgUnitsValue","userOrgUnitsValues","valuesContainerMap","join","getUserRolesValue","userRolesValues","getOptionTypeValue","labelName","getBirthdayDateValue","dateValue","getDate","getMonth","getFullYear","getLabelValue","labelExists","labelValue","getLabelComponent","translatedLabelName","getLabelComponents","labelNames","renderLabels","labelKeys","ViewProfile","WrappedApp","routes","getChildContext","getDataProviderProps","versionString","pop","apiVersion","isNaN","parseInt","DataProvider","CssVariables","colors","spacers","MuiThemeProvider","Router","history","Route","UserSettings","Profile","Account","Redirect","from","to","childContextTypes","AppWrapper","useD2","onInitialized"],"mappings":"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","file":"static/js/app.2585f79c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"noticeBox\":\"AuthoritiesWarning_noticeBox__3wgDm\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"AllowedMethodsFF_header__eO5B4\",\"helpText\":\"AllowedMethodsFF_helpText__3qFBh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"ExpirationDateFF_container__3DCMZ\",\"flex\":\"ExpirationDateFF_flex__MMmvr\",\"expirationDateText\":\"ExpirationDateFF_expirationDateText__3zKAP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"ContextSelector_header__Sf7vy\",\"contexts\":\"ContextSelector_contexts__1Kfpm\",\"context\":\"ContextSelector_context__o2_pv\",\"selectedContext\":\"ContextSelector_selectedContext__22zSs ContextSelector_context__o2_pv\",\"contextTitle\":\"ContextSelector_contextTitle__1vAa0\",\"contextDescription\":\"ContextSelector_contextDescription__3sr-Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"heading\":\"PersonalAccessTokens_heading__35zjd\",\"cardWrapper\":\"PersonalAccessTokens_cardWrapper__3znb6\",\"card\":\"PersonalAccessTokens_card__2QUrx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"items\":\"ExistingToken_items__7u5n_\",\"item\":\"ExistingToken_item__2wtgd\",\"singleLineItem\":\"ExistingToken_singleLineItem__3w0sk ExistingToken_item__2wtgd\",\"itemTitle\":\"ExistingToken_itemTitle__2sBHs\",\"itemValue\":\"ExistingToken_itemValue__2A-kk\",\"allowedMethods\":\"ExistingToken_allowedMethods__2u2fc\",\"allowedList\":\"ExistingToken_allowedList__2s9Wo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"NewToken_header__1Up9m\",\"token\":\"NewToken_token__3DlAh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"token\":\"TokenCard_token__37W3s\",\"newToken\":\"TokenCard_newToken__2l_4q TokenCard_token__37W3s\",\"tokenData\":\"TokenCard_tokenData__2cABC\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"copyTokenNotice\":\"TokensList_copyTokenNotice__hvQnJ\",\"list\":\"TokensList_list__2sZSV\"};","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport bnTranslations from './bn/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport hi_INTranslations from './hi_IN/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport neTranslations from './ne/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport orTranslations from './or/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('bn', namespace, bnTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('hi_IN', namespace, hi_INTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('ne', namespace, neTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('or', namespace, orTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { blue500, blue700, blue100, orange500, grey100, grey500, darkBlack, white, grey400 } from 'material-ui/styles/colors';\nimport getMuiTheme from 'material-ui/styles/getMuiTheme';\nimport Spacing from 'material-ui/styles/spacing';\nimport { fade } from 'material-ui/utils/colorManipulator';\nconst theme = {\n  spacing: Spacing,\n  fontFamily: 'Roboto, sans-serif',\n  palette: {\n    primary1Color: blue500,\n    primary2Color: blue700,\n    primary3Color: blue100,\n    accent1Color: orange500,\n    accent2Color: grey100,\n    accent3Color: grey500,\n    textColor: darkBlack,\n    alternateTextColor: white,\n    canvasColor: white,\n    borderColor: grey400,\n    disabledColor: fade(darkBlack, 0.3)\n  }\n};\nconst muiTheme = getMuiTheme(theme);\nexport default Object.assign({}, muiTheme, {\n  forms: {\n    minWidth: 350,\n    maxWidth: 750\n  },\n  formInput: {\n    fontWeight: 100\n  }\n});","import PropTypes from 'prop-types';\nimport React from 'react';\nimport AppTheme from '../layout/theme';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  }\n};\n\nconst InfoHeader = ({\n  text\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.header\n}, text);\n\nInfoHeader.propTypes = {\n  text: PropTypes.string.isRequired\n};\nexport default InfoHeader;","import PropTypes from 'prop-types';\nimport React from 'react';\n\nconst InfoRow = ({\n  label,\n  value,\n  labelStyle\n}) => /*#__PURE__*/React.createElement(\"tr\", {\n  className: \"info-row\"\n}, /*#__PURE__*/React.createElement(\"td\", {\n  className: \"info-cell-name\",\n  style: labelStyle\n}, label), /*#__PURE__*/React.createElement(\"td\", {\n  className: \"info-cell-value\"\n}, value));\n\nInfoRow.propTypes = {\n  label: PropTypes.string.isRequired,\n  value: PropTypes.node.isRequired,\n  labelStyle: PropTypes.object\n};\nInfoRow.defaultProps = {\n  labelStyle: {}\n};\nexport default InfoRow;","import { Card, CardText } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport InfoHeader from '../layout/InfoHeader.component';\nimport InfoRow from '../layout/InfoRow.component';\nconst styles = {\n  card: {\n    marginTop: 8,\n    marginRight: '1rem',\n    padding: '0 1rem'\n  }\n};\n\nconst AboutSection = ({\n  header,\n  attributes\n}) => /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(InfoHeader, {\n  text: header\n}), /*#__PURE__*/React.createElement(Card, {\n  style: styles.card\n}, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(\"table\", {\n  className: \"info-content\"\n}, /*#__PURE__*/React.createElement(\"tbody\", null, attributes.map(({\n  label,\n  value\n}) => /*#__PURE__*/React.createElement(InfoRow, {\n  key: label,\n  label: label,\n  value: typeof value === 'boolean' ? value.toString() : value\n})))))));\n\nAboutSection.propTypes = {\n  attributes: PropTypes.arrayOf(PropTypes.shape({\n    label: PropTypes.string.isRequired,\n    value: PropTypes.oneOfType([PropTypes.node, PropTypes.bool])\n  })).isRequired,\n  header: PropTypes.string.isRequired\n};\nexport default AboutSection;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport i18n from '../locales';\nimport AboutSection from './AboutSection.component';\n\nconst parseDateFromUTCString = (utcString, d2, hideIfEmpty) => {\n  try {\n    if (!utcString) {\n      return hideIfEmpty ? undefined : i18n.t('Never');\n    }\n\n    const locale = d2.currentUser.userSettings.settings.keyUiLocale;\n    const date = new Date(utcString);\n    const options = {\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false\n    };\n    return new Intl.DateTimeFormat(locale, options).format(date);\n  } catch (error) {\n    return i18n.t('Invalid date');\n  }\n};\n\nconst attributes = {\n  systemInfo: [{\n    key: null,\n    label: i18n.t('Web API'),\n    // eslint-disable-next-line react/display-name\n    getDisplayValue: (_value, d2) => /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      rel: \"noopener noreferrer\",\n      href: `${d2.system.systemInfo.contextPath}/api`\n    }, i18n.t('Browse it here'))\n  }, {\n    key: null,\n    label: i18n.t('Current user'),\n    getDisplayValue: (_value, d2) => d2.currentUser.username\n  }, {\n    key: 'version',\n    label: i18n.t('Version')\n  }, {\n    key: 'revision',\n    label: i18n.t('Build revision')\n  }, {\n    key: 'buildTime',\n    label: i18n.t('Build date'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'jasperReportsVersion',\n    label: i18n.t('Jasper reports version')\n  }, {\n    key: 'userAgent',\n    label: i18n.t('User agent')\n  }, {\n    key: 'serverDate',\n    label: i18n.t('Server date'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'lastAnalyticsTableSuccess',\n    label: i18n.t('Last analytics table generation'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'intervalSinceLastAnalyticsTableSuccess',\n    label: i18n.t('Time since last analytics table generation')\n  }, {\n    key: 'lastAnalyticsTableRuntime',\n    label: i18n.t('Last analytics table runtime')\n  }, {\n    key: 'lastAnalyticsTablePartitionSuccess',\n    label: i18n.t('Last continuous analytics table update'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2, true)\n  }, {\n    key: 'intervalSinceLastAnalyticsTablePartitionSuccess',\n    label: i18n.t('Time since last continuous analytics table update')\n  }, {\n    key: 'lastAnalyticsTablePartitionRuntime',\n    label: i18n.t('Last continuous analytics table runtime')\n  }, {\n    key: 'environmentVariable',\n    label: i18n.t('Environment variable')\n  }, {\n    key: 'systemId',\n    label: i18n.t('System ID')\n  }, {\n    key: 'lastSystemMonitoringSuccess',\n    label: i18n.t('Last monitoring success'),\n    getDisplayValue: (value, d2) => parseDateFromUTCString(value, d2)\n  }, {\n    key: 'externalDirectory',\n    label: i18n.t('External configuration directory')\n  }, {\n    key: 'fileStoreProvider',\n    label: i18n.t('File store provider')\n  }, {\n    key: 'nodeId',\n    label: i18n.t('Node ID')\n  }, {\n    key: 'cacheProvider',\n    label: i18n.t('Cache provider')\n  }, {\n    key: 'readReplicaCount',\n    label: i18n.t('Read replica count')\n  }, {\n    key: 'javaOpts',\n    label: i18n.t('Java opts')\n  }, {\n    key: 'javaVersion',\n    label: i18n.t('Java version')\n  }, {\n    key: 'javaVendor',\n    label: i18n.t('Java vendor')\n  }, {\n    key: 'osName',\n    label: i18n.t('OS name')\n  }, {\n    key: 'osArchitecture',\n    label: i18n.t('OS architecture')\n  }, {\n    key: 'osVersion',\n    label: i18n.t('OS version')\n  }, {\n    key: 'memoryInfo',\n    label: i18n.t('Memory info')\n  }, {\n    key: 'cpuCores',\n    label: i18n.t('CPU cores')\n  }, {\n    key: 'calendar',\n    label: i18n.t('Calendar')\n  }],\n  databaseInfo: [{\n    key: 'name',\n    label: i18n.t('Name')\n  }, {\n    key: 'user',\n    label: i18n.t('User')\n  }, {\n    key: 'spatialSupport',\n    label: i18n.t('Spatial support')\n  }]\n};\n\nclass AboutPage extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"getAttributes\", (selected, source) => selected.reduce((acc, attribute) => {\n      if (attribute.getDisplayValue !== undefined) {\n        const value = attribute.getDisplayValue(source[attribute.key], this.context.d2);\n\n        if (value !== undefined) {\n          acc.push({\n            label: attribute.label,\n            value\n          });\n        }\n      } else if (source[attribute.key]) {\n        acc.push({\n          label: attribute.label,\n          value: source[attribute.key]\n        });\n      }\n\n      return acc;\n    }, []));\n\n    _defineProperty(this, \"render\", () => {\n      const {\n        d2\n      } = this.context;\n      const systemInfo = this.getAttributes(attributes.systemInfo, d2.system.systemInfo);\n      const databaseInfo = this.getAttributes(attributes.databaseInfo, d2.system.systemInfo.databaseInfo);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content-area\"\n      }, systemInfo.length > 0 && /*#__PURE__*/React.createElement(AboutSection, {\n        header: i18n.t('System info'),\n        attributes: systemInfo\n      }), databaseInfo.length > 0 && /*#__PURE__*/React.createElement(AboutSection, {\n        header: i18n.t('Database'),\n        attributes: databaseInfo\n      }));\n    });\n  }\n\n}\n\nAboutPage.contextTypes = {\n  d2: PropTypes.object.isRequired\n};\nexport default AboutPage;","import Store from 'd2-ui/lib/store/Store';\nexport default Store.create();","import Store from 'd2-ui/lib/store/Store';\nexport default Store.create();","import Store from 'd2-ui/lib/store/Store';\nexport default Store.create();","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport log from 'loglevel';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { hashHistory } from 'react-router';\nimport AppRouter from './app.router';\nimport optionValueStore from './optionValue.store';\nimport userProfileStore from './profile/profile.store';\nimport userSettingsStore from './settings/userSettings.store';\nconst appActions = Action.createActionsFromNames(['init', 'setCategory', 'showSnackbarMessage' // Implemented in Snackbar.component.js\n]);\nappActions.init.subscribe(() => {\n  getD2().then(d2 => {\n    const api = d2.Api.getApi();\n    Promise.all([api.get('system/styles'), api.get('locales/ui'), api.get('locales/db'), api.get('userSettings', {\n      useFallback: false\n    }), d2.system.settings.all(), api.get('2fa/qr')]).then(results => {\n      const styles = (results[0] || []).map(style => ({\n        id: style.path,\n        displayName: style.name\n      }));\n      const uiLocales = (results[1] || []).map(locale => ({\n        id: locale.locale,\n        displayName: locale.name\n      }));\n      const dbLocales = (results[2] || []).map(locale => ({\n        id: locale.locale,\n        displayName: locale.name\n      }));\n      const systemDefault = Object.keys(results[4]).reduce((defaults, key) => {\n        defaults[key] = results[4][key];\n        return defaults;\n      }, {});\n      userProfileStore.setState(d2.currentUser);\n      userProfileStore.state.qrCodeUrl = results[5].url;\n      userSettingsStore.setState(results[3]);\n      optionValueStore.setState({\n        styles,\n        uiLocales,\n        dbLocales,\n        systemDefault\n      });\n      log.debug('Current user profile loaded:', userProfileStore.state);\n      log.debug('Current user settings loaded:', userSettingsStore.state);\n      ReactDOM.render( /*#__PURE__*/React.createElement(AppRouter, {\n        d2: d2\n      }), document.querySelector('#app'));\n    }, error => {\n      log.error('Failed to load user settings:', error);\n    });\n  });\n});\nappActions.setCategory.subscribe(({\n  data: target\n}) => {\n  hashHistory.push(`/${target}`);\n});\nexport default appActions;","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport log from 'loglevel';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\nimport userProfileStore from '../profile/profile.store';\nconst accountActions = Action.createActionsFromNames(['setPassword', 'setTwoFactorStatus', 'getQrCode']);\naccountActions.setPassword.subscribe(({\n  data: [oldPassword, newPassword, onSuccess],\n  complete,\n  error\n}) => {\n  const payload = {\n    oldPassword,\n    newPassword\n  };\n  getD2().then(d2 => {\n    const api = d2.Api.getApi();\n    api.update('/me/changePassword', payload).then(() => {\n      log.debug('Password updated successfully.');\n      appActions.setCategory('passwordChanged');\n      onSuccess();\n      complete();\n    }).catch(err => {\n      const message = err && err.message && typeof err.message === 'string' ? err.message : i18n.t('Failed to update password');\n      appActions.showSnackbarMessage({\n        message,\n        status: 'error',\n        permanent: true\n      });\n      log.error('Failed to update password:', err);\n      error();\n    });\n  });\n});\naccountActions.setTwoFactorStatus.subscribe(({\n  data: twoFA,\n  complete,\n  error\n}) => {\n  const payload = {\n    userCredentials: {\n      twoFA\n    }\n  };\n  const status = twoFA ? 'on' : 'off';\n  getD2().then(d2 => {\n    userProfileStore.state.twoFA = twoFA;\n    userProfileStore.setState(userProfileStore.state);\n    const api = d2.Api.getApi();\n    api.update('/me', payload).then(() => {\n      log.debug(`2 Factor is now ${status}.`);\n      appActions.showSnackbarMessage({\n        message: twoFA ? i18n.t('2-Factor successfully turned ON') : i18n.t('2-Factor successfully turned OFF'),\n        status: 'success'\n      });\n      complete();\n    }).catch(err => {\n      appActions.showSnackbarMessage({\n        message: twoFA ? i18n.t('Failed to turn ON 2-Factor') : i18n.t('Failed to turn OFF 2-Factor'),\n        status: 'error'\n      });\n      log.error('Failed to change 2 Factor status:', err);\n      error();\n    });\n  });\n});\naccountActions.getQrCode.subscribe(() => {});\nexport default accountActions;","// Atleast one digit\nconst oneDigit = /^(?=.*\\d)/; // Atleast one uppercase character\n\nconst oneUpperCase = /^(?=.*[A-Z])/; // Atleast one special character\n// Using this regex to match all non-alphanumeric characters to match server-side implementation\n// https://github.com/dhis2/dhis2-core/blob/master/dhis-2/dhis-services/dhis-service-core/src/main/java/org/hisp/dhis/user/SpecialCharacterValidationRule.java#L39\n\nconst oneSpecialCharacter = /[^a-zA-Z0-9]/;\nexport default function isValidPassword(value) {\n  if (!value) {\n    return true;\n  }\n\n  return oneDigit.test(value) && oneUpperCase.test(value) && oneSpecialCharacter.test(value) && value.length > 7 && value.length < 36;\n}","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport TextField from 'd2-ui/lib/form-fields/TextField';\nimport FormBuilder from 'd2-ui/lib/forms/FormBuilder.component';\nimport { FlatButton, RaisedButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\nimport accountActions from './account.actions';\nimport isValidPassword from './isValidPassword';\nconst styles = {\n  notification: {\n    border: '1px solid #bdbdbd',\n    backgroundColor: '#e5e5e5',\n    padding: 12\n  }\n};\n\nclass AccountEditor extends Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"isSamePassword\", value => {\n      return value === this.state.newPassword;\n    });\n\n    _defineProperty(this, \"isNotEmpty\", value => {\n      return value && String(value).trim().length > 0;\n    });\n\n    _defineProperty(this, \"clearRepeatPassword\", () => {\n      this.setState({\n        oldPassword: '',\n        reNewPassword: '',\n        newPassword: ''\n      });\n      return true;\n    });\n\n    _defineProperty(this, \"updatePassword\", () => {\n      const formState = this.formBuilder ? this.formBuilder.state.form : {};\n\n      if (formState.pristine === true) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('No changes have been made')\n        });\n      } else if (formState.validating === true) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('The form is currently being validated. Please try again.'),\n          status: 'warning'\n        });\n      } else if (formState.valid !== true) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('The form contains errors. Please fix the errors and try again.'),\n          status: 'error'\n        });\n      } else if (!this.isNotEmpty(this.state.newPassword) || !this.isNotEmpty(this.state.reNewPassword)) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('The entered values do not match. Please re-enter.'),\n          status: 'error'\n        });\n      } else if (!this.isNotEmpty(this.state.oldPassword)) {\n        appActions.showSnackbarMessage({\n          message: i18n.t('Please provide your old password'),\n          status: 'error'\n        });\n      } else {\n        accountActions.setPassword(this.state.oldPassword, this.state.newPassword, this.clearRepeatPassword);\n      }\n    });\n\n    _defineProperty(this, \"openTwoFactorDialog\", () => {\n      appActions.setCategory('twoFactor');\n    });\n\n    _defineProperty(this, \"updateState\", (e, v) => {\n      this.setState({\n        [e]: v\n      });\n    });\n\n    this.state = {\n      oldPassword: '',\n      newPassword: '',\n      reNewPassword: '',\n      wrongOldPasswordText: ''\n    };\n  }\n\n  render() {\n    const usesOpenIdConnect = this.context.d2.currentUser.externalAuth;\n    const fields = [{\n      name: 'username',\n      component: TextField,\n      value: this.props.username,\n      props: {\n        floatingLabelText: i18n.t('Username'),\n        style: {\n          width: '100%'\n        },\n        disabled: true\n      }\n    }, {\n      name: 'oldPassword',\n      component: TextField,\n      value: this.state.oldPassword,\n      props: {\n        type: 'password',\n        floatingLabelText: i18n.t('Old password'),\n        style: {\n          width: '100%'\n        },\n        changeEvent: 'onBlur',\n        autoComplete: 'new-password',\n        disabled: usesOpenIdConnect\n      },\n      validators: [{\n        validator: this.isNotEmpty,\n        message: i18n.t(\"This field can't be left blank\")\n      }]\n    }, {\n      name: 'newPassword',\n      component: TextField,\n      value: this.state.newPassword,\n      props: {\n        type: 'password',\n        floatingLabelText: i18n.t('New password'),\n        style: {\n          width: '100%'\n        },\n        changeEvent: 'onBlur',\n        autoComplete: 'new-password',\n        disabled: usesOpenIdConnect\n      },\n      validators: [{\n        validator: isValidPassword,\n        message: i18n.t('Password should be at least 8 characters with at least 1 digit, 1 uppercase letter and 1 special character')\n      }]\n    }, {\n      name: 'reNewPassword',\n      component: TextField,\n      value: this.state.reNewPassword,\n      props: {\n        type: 'password',\n        floatingLabelText: i18n.t('Repeat new password'),\n        style: {\n          width: '100%'\n        },\n        changeEvent: 'onBlur',\n        autoComplete: 'new-password',\n        disabled: usesOpenIdConnect\n      },\n      validators: [{\n        validator: this.isSamePassword,\n        message: i18n.t('The entered values do not match. Please re-enter.')\n      }]\n    }, {\n      name: 'twoFactorSetupButton',\n      component: FlatButton,\n      props: {\n        label: i18n.t('Setup 2-Factor'),\n        onClick: this.openTwoFactorDialog,\n        style: {\n          marginTop: '20px'\n        },\n        secondary: false,\n        disabled: usesOpenIdConnect\n      }\n    }, {\n      name: 'postbutton',\n      component: RaisedButton,\n      props: {\n        label: i18n.t('Update password'),\n        onClick: this.updatePassword,\n        style: {\n          marginTop: '20px'\n        },\n        secondary: true,\n        disabled: usesOpenIdConnect\n      }\n    }];\n\n    const setRef = r => {\n      this.formBuilder = r;\n    };\n\n    return /*#__PURE__*/React.createElement(React.Fragment, null, usesOpenIdConnect && /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.notification\n    }, i18n.t(\"This account is linked to an OpenID Connect identity. Visit the Open ID Connect provider to manage this account's settings.\")), /*#__PURE__*/React.createElement(FormBuilder, {\n      fields: fields,\n      onUpdateField: this.updateState,\n      ref: setRef\n    }));\n  }\n\n}\n\nAccountEditor.propTypes = {\n  username: PropTypes.string.isRequired\n};\nAccountEditor.contextTypes = {\n  d2: PropTypes.object.isRequired\n};\nexport default AccountEditor;","import i18n from './locales';\nconst settingsKeyMapping = {\n  /* ================================================================= */\n\n  /* Category: Profile Settings                                        */\n\n  /* ================================================================= */\n  firstName: {\n    label: i18n.t('First name'),\n    type: 'textfield',\n    validators: ['required']\n  },\n  surname: {\n    label: i18n.t('Surname'),\n    type: 'textfield',\n    validators: ['required']\n  },\n  avatar: {\n    label: i18n.t('Profile picture'),\n    type: 'avatar'\n  },\n  gender: {\n    label: i18n.t('Gender'),\n    type: 'dropdown',\n    options: {\n      gender_male: i18n.t('Male'),\n      gender_female: i18n.t('Female'),\n      gender_other: i18n.t('Other')\n    }\n  },\n  email: {\n    label: i18n.t('E-mail'),\n    type: 'textfield',\n    validators: ['email']\n  },\n  phoneNumber: {\n    label: i18n.t('Mobile phone number'),\n    type: 'textfield'\n  },\n  introduction: {\n    label: i18n.t('Introduction'),\n    type: 'textfield',\n    multiLine: true\n  },\n  jobTitle: {\n    label: i18n.t('Job title'),\n    type: 'textfield'\n  },\n  userRoles: {\n    label: i18n.t('User roles'),\n    type: 'userRoles',\n    validators: ['required']\n  },\n  userOrgUnits: {\n    label: i18n.t('User org units'),\n    type: 'userOrgUnits',\n    validators: ['required']\n  },\n  birthday: {\n    label: i18n.t('Birthday'),\n    type: 'date'\n  },\n  nationality: {\n    label: i18n.t('Nationality'),\n    type: 'textfield'\n  },\n  employer: {\n    label: i18n.t('Employer'),\n    type: 'textfield'\n  },\n  education: {\n    label: i18n.t('Education'),\n    type: 'textfield',\n    multiLine: true\n  },\n  // TODO: chips component for interests and languages?\n  interests: {\n    label: i18n.t('Interests'),\n    type: 'textfield',\n    multiLine: true\n  },\n  languages: {\n    label: i18n.t('Languages'),\n    type: 'textfield',\n    multiLine: true\n  },\n  whatsApp: {\n    label: i18n.t('WhatsApp'),\n    type: 'textfield',\n    validators: ['whats_app']\n  },\n  facebookMessenger: {\n    label: i18n.t('Facebook Messenger'),\n    type: 'textfield'\n  },\n  skype: {\n    label: i18n.t('Skype'),\n    type: 'textfield'\n  },\n  telegram: {\n    label: i18n.t('Telegram'),\n    type: 'textfield'\n  },\n  twitter: {\n    label: i18n.t('Twitter'),\n    type: 'textfield'\n  },\n\n  /* ================================================================= */\n\n  /* Category: Account Settings                                        */\n\n  /* ================================================================= */\n  accountEditor: {\n    label: i18n.t('Account editor'),\n    type: 'accountEditor'\n  },\n\n  /* ================================================================= */\n\n  /* Category: System Settings                                         */\n\n  /* ================================================================= */\n  keyUiLocale: {\n    label: i18n.t('Interface language'),\n    type: 'dropdown',\n    source: 'uiLocales',\n    showSystemDefault: true\n  },\n  keyDbLocale: {\n    label: i18n.t('Database language'),\n    type: 'dropdown',\n    source: 'dbLocales',\n    showSystemDefault: true\n  },\n  keyStyle: {\n    label: i18n.t('Style'),\n    type: 'dropdown',\n    source: 'styles',\n    showSystemDefault: true\n  },\n  keyAnalysisDisplayProperty: {\n    label: i18n.t('Property to display in analysis modules'),\n    type: 'dropdown',\n    options: {\n      name: i18n.t('Name'),\n      shortName: i18n.t('Short name')\n    },\n    showSystemDefault: true\n  },\n  keyMessageEmailNotification: {\n    label: i18n.t('Enable message email notifications'),\n    type: 'dropdown',\n    options: {\n      true: i18n.t('Yes'),\n      false: i18n.t('No')\n    }\n  },\n  keyMessageSmsNotification: {\n    label: i18n.t('Enable message SMS notifications'),\n    type: 'dropdown',\n    options: {\n      true: i18n.t('Yes'),\n      false: i18n.t('No')\n    }\n  }\n};\nexport default settingsKeyMapping;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport CircularProgress from 'material-ui/CircularProgress';\nimport FlatButton from 'material-ui/FlatButton';\nimport ActionDelete from 'material-ui/svg-icons/action/delete';\nimport FileUpload from 'material-ui/svg-icons/file/file-upload';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport userSettingsActions from '../app.actions';\nimport i18n from '../locales';\nimport './avatareditor.component.css';\nimport optionValueStore from '../optionValue.store.js';\nconst MAX_PROFILE_PICTURE_SIZE_IN_MB = 2; // maximum allowed file size for an avatar (2MB)\n\nclass AvatarEditor extends Component {\n  constructor(props) {\n    var _optionValueStore$sta, _optionValueStore$sta2;\n\n    super(props); // This system setting does not exist currently, but leaving it here in case 1MB is not enough in some contexts\n\n    _defineProperty(this, \"getInputRef\", () => this.inputRef);\n\n    _defineProperty(this, \"setInputRef\", node => this.inputRef = node);\n\n    _defineProperty(this, \"onFileSelect\", async event => {\n      const {\n        onChange\n      } = this.props; // Setup form data for image file\n\n      const file = event.target.files[0]; // reject files bigger than the maximum allowed size\n\n      const maxSize = this.maxPhotoSize * 1000 * 1024; // maximum size in bytes\n\n      if ((file === null || file === void 0 ? void 0 : file.size) > maxSize) {\n        userSettingsActions.showSnackbarMessage({\n          message: i18n.t(`Please choose a profile avatar less than {{- maxSize}}MB in size.`, {\n            maxSize: this.maxPhotoSize\n          }),\n          status: 'error',\n          permanent: true\n        });\n        return;\n      } // Cancel was pressed, no file provided\n\n\n      if (!file) {\n        return;\n      }\n\n      this.setState({\n        loading: true\n      });\n      const formData = new FormData();\n      formData.append('file', file);\n      formData.append('domain', 'USER_AVATAR'); // Send image to server and save image id as avatar\n\n      try {\n        const postResponse = await this.api.post('fileResources', formData);\n        const imageId = postResponse.response.fileResource.id;\n        onChange({\n          target: {\n            value: {\n              id: imageId\n            }\n          }\n        });\n        this.setState({\n          loading: false,\n          avatarSrc: this.parseAvatarSrc(imageId)\n        });\n      } catch (error) {\n        userSettingsActions.showSnackbarMessage({\n          message: i18n.t('Failed to upload profile picture'),\n          status: 'error'\n        });\n        console.error('POST request to fileResources endpoint failed: ', error);\n      }\n    });\n\n    _defineProperty(this, \"onRemoveIcon\", () => {\n      this.props.onChange({\n        target: {\n          value: null\n        }\n      }); // Clear input here to ensure that a re-upload of a previously used file is not ignored\n\n      const input = this.getInputRef();\n      input.value = null;\n      this.setState({\n        avatarSrc: null\n      });\n    });\n\n    this.maxPhotoSize = (_optionValueStore$sta = optionValueStore === null || optionValueStore === void 0 ? void 0 : (_optionValueStore$sta2 = optionValueStore.state.systemDefault) === null || _optionValueStore$sta2 === void 0 ? void 0 : _optionValueStore$sta2.keyMaxAvatarSizeInMB) !== null && _optionValueStore$sta !== void 0 ? _optionValueStore$sta : MAX_PROFILE_PICTURE_SIZE_IN_MB;\n    this.api = props.d2.Api.getApi();\n    this.userId = props.currentUser.id;\n    this.state = {\n      avatarSrc: props.currentUser.avatar ? this.parseAvatarSrc(props.currentUser.avatar.id) : null,\n      loading: false\n    };\n    this.inputRef = null;\n  }\n\n  parseAvatarSrc(avatarId) {\n    return `${this.api.baseUrl}/fileResources/${avatarId}/data`;\n  }\n\n  renderAvatar() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__preview\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.avatarSrc,\n      className: \"avatar-editor__image\",\n      alt: i18n.t('Profile picture')\n    }));\n  }\n\n  renderPlaceholder() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__not-available\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, i18n.t('No profile picture available')));\n  }\n\n  render() {\n    const {\n      loading,\n      avatarSrc\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"avatar-editor__label\"\n    }, i18n.t('Profile picture')), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__preview-wrap\"\n    }, loading ? /*#__PURE__*/React.createElement(CircularProgress, null) : avatarSrc ? this.renderAvatar() : this.renderPlaceholder()), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"avatar-editor__buttonstrip\"\n    }, /*#__PURE__*/React.createElement(FlatButton, {\n      containerElement: \"label\",\n      icon: /*#__PURE__*/React.createElement(FileUpload, null),\n      label: i18n.t('Select profile picture'),\n      primary: true\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onChange: this.onFileSelect,\n      style: {\n        display: 'none'\n      },\n      type: \"file\",\n      accept: \"image/*\",\n      ref: this.setInputRef\n    })), avatarSrc && /*#__PURE__*/React.createElement(FlatButton, {\n      icon: /*#__PURE__*/React.createElement(ActionDelete, null),\n      label: i18n.t('Remove profile picture'),\n      onClick: this.onRemoveIcon\n    })));\n  }\n\n}\n\nAvatarEditor.propTypes = {\n  currentUser: PropTypes.object.isRequired,\n  d2: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired\n};\nexport default AvatarEditor;","import Checkbox from 'd2-ui/lib/form-fields/CheckBox.component';\nimport DatePicker from 'd2-ui/lib/form-fields/DatePicker.component';\nimport SelectField from 'd2-ui/lib/form-fields/DropDown.component';\nimport TextField from 'd2-ui/lib/form-fields/TextField';\nimport FormBuilder from 'd2-ui/lib/forms/FormBuilder.component';\nimport { wordToValidatorMap } from 'd2-ui/lib/forms/Validators';\nimport log from 'loglevel';\nimport { Card, CardText } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport AccountEditor from '../account/AccountEditor.component';\nimport userSettingsActions from '../app.actions';\nimport i18n from '../locales';\nimport optionValueStore from '../optionValue.store';\nimport userSettingsStore from '../settings/userSettings.store';\nimport userSettingsKeyMapping from '../userSettingsMapping';\nimport AvatarEditor from './AvatarEditor.component';\nimport AppTheme from './theme';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    color: AppTheme.rawTheme.palette.textColor,\n    padding: '24px 0 12px 16px'\n  },\n  card: {\n    marginTop: 8,\n    marginRight: '1rem',\n    padding: '0 1rem'\n  },\n  cardTitle: {\n    background: AppTheme.rawTheme.palette.primary2Color,\n    height: 62\n  },\n  cardTitleText: {\n    fontSize: 28,\n    fontWeight: 100,\n    color: AppTheme.rawTheme.palette.alternateTextColor\n  },\n  noHits: {\n    padding: '1rem',\n    marginTop: '1rem',\n    fontWeight: 300\n  },\n  userSettingsOverride: {\n    color: AppTheme.rawTheme.palette.primary1Color,\n    marginTop: -6,\n    fontSize: '0.8rem',\n    fontWeight: 400\n  },\n  menuIcon: {\n    color: '#757575'\n  },\n  menuLabel: {\n    position: 'relative',\n    top: -6,\n    marginLeft: 16\n  }\n};\n\nfunction wrapWithLabel(WrappedComponent, label) {\n  // eslint-disable-next-line react/display-name\n  return props => {\n    const labelStyle = styles.userSettingsOverride;\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(WrappedComponent, props), /*#__PURE__*/React.createElement(\"div\", {\n      style: labelStyle\n    }, label));\n  };\n} // Handles translation keys from d2-ui form validators\n\n\nfunction translateValidatorMessage(validatorMessage) {\n  switch (validatorMessage) {\n    case 'value_required':\n      return i18n.t('This field is required');\n\n    case 'value_should_be_a_url':\n      return i18n.t('This field should be a URL');\n\n    case 'value_should_be_list_of_urls':\n      return i18n.t('This field should contain a list of URLs');\n\n    case 'value_should_be_a_number':\n      return i18n.t('This field should be a number');\n\n    case 'value_should_be_a_positive_number':\n      return i18n.t('This field should be a positive number');\n\n    case 'value_should_be_an_email':\n      return i18n.t('This field should be an email');\n\n    case 'invalid_whats_app':\n      return i18n.t('Please enter a valid international phone number (+0123456789)');\n\n    default:\n      return validatorMessage;\n  }\n}\n\nfunction getNameValidator(name) {\n  if (wordToValidatorMap.has(name)) {\n    return {\n      validator: wordToValidatorMap.get(name),\n      message: translateValidatorMessage(wordToValidatorMap.get(name).message)\n    };\n  }\n\n  return false;\n}\n\nfunction createTextField(fieldBase, mapping) {\n  return Object.assign({}, fieldBase, {\n    props: Object.assign({}, fieldBase.props, {\n      changeEvent: 'onBlur',\n      multiLine: !!mapping.multiLine,\n      disabled: !!mapping.disabled\n    })\n  });\n} // eslint-disable-next-line max-params\n\n\nfunction createDateField(fieldBase, fieldName, mapping, valueStore) {\n  const state = valueStore.state;\n  return Object.assign({}, fieldBase, {\n    component: DatePicker,\n    value: state && state[fieldName] ? new Date(state[fieldName]) : '',\n    props: Object.assign({}, fieldBase.props, {\n      floatingLabelText: mapping.label,\n      dateFormat: userSettingsStore.state.keyDateFormat || 'yyyy-MM-dd',\n      textFieldStyle: {\n        width: '100%'\n      },\n      allowFuture: false\n    })\n  });\n}\n\nfunction createCheckBox(fieldBase, fieldName) {\n  return Object.assign({}, fieldBase, {\n    component: Checkbox,\n    props: {\n      value: '',\n      label: fieldBase.props.floatingLabelText,\n      style: fieldBase.props.style,\n      checked: fieldBase.value.toString() === 'true',\n      onChange: (e, v) => {\n        userSettingsActions.saveUserKey(fieldName, v ? 'true' : 'false');\n      }\n    }\n  });\n} // eslint-disable-next-line max-params\n\n\nfunction createDropDown(fieldBase, fieldName, valueStore, mapping) {\n  const value = valueStore.state[fieldName] || valueStore.state[fieldName] === false ? valueStore.state[fieldName].toString() : mapping.showSystemDefault ? 'system_default' : 'null';\n  const menuItems = (mapping.source ? optionValueStore.state && optionValueStore.state[mapping.source] || [] : Object.keys(mapping.options).map(id => {\n    const displayName = mapping.options[id];\n    return {\n      id,\n      displayName\n    };\n  })).slice();\n  const systemSettingValue = optionValueStore.state && optionValueStore.state.systemDefault && optionValueStore.state.systemDefault[fieldName];\n  let systemSettingLabel;\n\n  if (typeof systemSettingValue === 'boolean') {\n    systemSettingLabel = systemSettingValue ? i18n.t('Yes') : i18n.t('No');\n  } else if (optionValueStore.state[mapping.source]) {\n    systemSettingLabel = optionValueStore.state[mapping.source].filter(x => x.id === systemSettingValue).map(x => x.displayName)[0] || i18n.t('No value');\n  } else if (systemSettingValue === 'null' || systemSettingValue === 'system_default' || typeof systemSettingValue === 'undefined') {\n    systemSettingLabel = i18n.t('No value');\n  } else {\n    systemSettingLabel = systemSettingValue;\n  }\n\n  if (mapping.showSystemDefault) {\n    menuItems.unshift({\n      id: 'system_default',\n      // TODO: use i18n interpolation here\n      displayName: `${i18n.t('Use system default')} (${systemSettingLabel})`\n    });\n  }\n\n  return Object.assign({}, fieldBase, {\n    component: SelectField,\n    value,\n    props: Object.assign({}, fieldBase.props, {\n      includeEmpty: !!mapping.includeEmpty,\n      emptyLabel: mapping.includeEmpty ? mapping.emptyLabel : undefined,\n      noOptionsLabel: i18n.t('No options')\n    }, {\n      menuItems\n    })\n  });\n}\n\nfunction createAccountEditor(fieldBase, d2, valueStore) {\n  return Object.assign({}, fieldBase, {\n    component: AccountEditor,\n    props: {\n      d2,\n      username: valueStore.state.username\n    }\n  });\n}\n\nfunction createAvatarEditor(fieldBase, d2, valueStore) {\n  return Object.assign({}, fieldBase, {\n    component: AvatarEditor,\n    props: {\n      d2,\n      currentUser: valueStore.state\n    }\n  });\n}\n\nfunction createFieldBaseObject(fieldName, mapping, valueStore) {\n  const state = valueStore.state;\n  const hintText = mapping.hintText;\n  const valueString = Object.prototype.hasOwnProperty.call(state, fieldName) ? String(state[fieldName]).trim() : '';\n  const propsObject = {\n    floatingLabelText: mapping.label,\n    style: {\n      width: '100%'\n    },\n    hintText\n  };\n  const baseValidators = (mapping.validators || []).map(name => getNameValidator(name)).filter(v => v);\n  return Object.assign({}, {\n    name: fieldName,\n    value: valueString,\n    component: TextField,\n    props: propsObject,\n    validators: baseValidators\n  });\n}\n\nfunction createField(fieldName, valueStore, d2) {\n  const mapping = userSettingsKeyMapping[fieldName];\n  const fieldBase = createFieldBaseObject(fieldName, mapping, valueStore);\n\n  switch (mapping.type) {\n    case 'textfield':\n      return createTextField(fieldBase, mapping);\n\n    case 'date':\n      return createDateField(fieldBase, fieldName, mapping, valueStore);\n\n    case 'checkbox':\n      return createCheckBox(fieldBase, fieldName);\n\n    case 'dropdown':\n      return createDropDown(fieldBase, fieldName, valueStore, mapping);\n\n    case 'accountEditor':\n      return createAccountEditor(fieldBase, d2, valueStore);\n\n    case 'avatar':\n      return createAvatarEditor(fieldBase, d2, valueStore);\n\n    default:\n      log.warn(`Unknown control type \"${mapping.type}\" encountered for field \"${fieldName}\"`);\n      return {};\n  }\n}\n\nfunction wrapFieldWithLabel(field) {\n  const mapping = userSettingsKeyMapping[field.name]; // For settings that have a system wide default value,\n  // and is overridden by the current user, display\n  // the system wide default under the current user\n  // setting (which may be the same value)\n\n  if (mapping.showSystemDefault && field.value && field.value !== null && field.value !== 'null' && Object.prototype.hasOwnProperty.call(optionValueStore.state.systemDefault, field.name)) {\n    const systemValue = optionValueStore.state.systemDefault[field.name];\n    const actualSystemValue = systemValue !== undefined && systemValue !== null && systemValue !== 'null';\n    let systemValueLabel = systemValue;\n\n    if (mapping.source && actualSystemValue) {\n      systemValueLabel = optionValueStore.state[mapping.source].find(item => item.id === systemValue).displayName;\n    } else if (field.props.menuItems && actualSystemValue) {\n      systemValueLabel = field.props.menuItems.find(item => item.id === systemValue || String(systemValue) === item.id).displayName;\n    } else {\n      systemValueLabel = mapping.options[systemValue];\n    } // TODO: use i18n interpolation here\n\n\n    const systemDefaultLabel = `${i18n.t('System default')}: ${systemValueLabel}`;\n    return Object.assign(field, {\n      component: wrapWithLabel(field.component, systemDefaultLabel)\n    });\n  }\n\n  return field;\n}\n\nclass FormFields extends Component {\n  componentDidMount() {\n    this.disposable = this.props.valueStore.subscribe(() => {\n      this.forceUpdate();\n    });\n  }\n\n  componentWillUnmount() {\n    this.disposable.unsubscribe();\n  }\n\n  renderFields(fieldNames) {\n    const d2 = this.context.d2;\n    const valueStore = this.props.valueStore;\n    const fields = fieldNames.map(fieldName => createField(fieldName, valueStore, d2)).filter(field => !!field.name).map(field => wrapFieldWithLabel(field));\n    return /*#__PURE__*/React.createElement(Card, {\n      style: styles.card\n    }, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(FormBuilder, {\n      fields: fields,\n      onUpdateField: this.props.onUpdateField\n    })));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-area\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, this.props.pageLabel), /*#__PURE__*/React.createElement(\"form\", {\n      autoComplete: \"off\"\n    }, this.renderFields(this.props.fieldKeys)));\n  }\n\n}\n\nFormFields.propTypes = {\n  fieldKeys: PropTypes.arrayOf(PropTypes.string).isRequired,\n  pageLabel: PropTypes.string.isRequired,\n  valueStore: PropTypes.object.isRequired,\n  onUpdateField: PropTypes.func.isRequired\n};\nFormFields.contextTypes = {\n  d2: PropTypes.object.isRequired\n};\nexport default FormFields;","const PHONE_PATTERN = /^\\+(?:[0-9].?){4,14}[0-9]$/;\nexport default function isValidWhatsApp(value) {\n  // It's an optional field so empty is also valid\n  return !value || PHONE_PATTERN.test(value);\n}\nisValidWhatsApp.message = 'invalid_whats_app';","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport { wordToValidatorMap } from 'd2-ui/lib/forms/Validators';\nimport log from 'loglevel';\nimport userSettingsActions from '../app.actions';\nimport i18n from '../locales';\nimport userSettingsKeyMapping from '../userSettingsMapping';\nimport isValidWhatsApp from './isValidWhatsApp';\nimport userProfileStore from './profile.store'; // Add whatsApp validation to the validator set\n\nwordToValidatorMap.set('whats_app', isValidWhatsApp);\nconst userProfileActions = Action.createActionsFromNames(['save']);\nuserProfileActions.save.subscribe(({\n  data,\n  complete,\n  error\n}) => {\n  const [key, value] = data;\n  let payload = {\n    [key]: String(value).trim() || ' '\n  }; // TODO: Ugly hack to allow saving empty fields\n\n  if (key === 'birthday') {\n    const date = new Date(value);\n    payload = {\n      [key]: date.toISOString()\n    };\n  }\n\n  getD2().then(d2 => {\n    userProfileStore.state[key] = value;\n    userProfileStore.setState(userProfileStore.state); // Run field validators\n\n    if (Array.isArray(userSettingsKeyMapping[key].validators)) {\n      const validators = userSettingsKeyMapping[key].validators;\n\n      if (!validators.reduce((prev, curr) => prev && wordToValidatorMap.get(curr)(value), true)) {\n        log.warn(`One or more validators did not pass for field \"${key}\" and value \"${value}\"`);\n        return;\n      }\n    }\n\n    getProfileUpdatePromise({\n      key,\n      value,\n      payload,\n      userId: userProfileStore.state.id,\n      d2\n    }).then(() => {\n      log.debug('User Profile updated successfully.');\n      userSettingsActions.showSnackbarMessage({\n        message: i18n.t('User profile updated'),\n        status: 'success'\n      });\n      complete();\n    }).catch(err => {\n      userSettingsActions.showSnackbarMessage({\n        message: i18n.t('Failed to update user profile'),\n        status: 'error'\n      });\n      log.error('Failed to update user profile:', err);\n      error();\n    });\n  });\n});\n\nfunction getProfileUpdatePromise({\n  key,\n  value,\n  payload,\n  userId,\n  d2\n}) {\n  const api = d2.Api.getApi();\n\n  if (key === 'avatar') {\n    if (value) {\n      // Set avatar\n      // Post avatar directly to the `/user/<ID>` endpoint, because d2 update calls to `/me` cause issues\n      return api.patch(`/users/${userId}`, {\n        avatar: value.id\n      });\n    } else {\n      // Clear avatar\n      return removeAvatar(userId, api);\n    }\n  }\n\n  return api.update('me', payload);\n}\n\nasync function removeAvatar(userId, api) {\n  const url = `/users/${userId}`;\n  const user = await api.get(url, {\n    fields: ':owner'\n  });\n  delete user.avatar;\n  return api.update(url, user);\n}\n\nexport default userProfileActions;","import React from 'react';\nimport FormFields from '../layout/FormFields.component';\nimport i18n from '../locales';\nimport userProfileActions from '../profile/profile.actions';\nimport userProfileStore from '../profile/profile.store';\n\nfunction EditProfile() {\n  const fieldKeys = ['accountEditor'];\n  const pageLabel = i18n.t('Edit account settings');\n  return /*#__PURE__*/React.createElement(FormFields, {\n    pageLabel: pageLabel,\n    fieldKeys: fieldKeys,\n    valueStore: userProfileStore,\n    onUpdateField: userProfileActions.save\n  });\n}\n\nexport default EditProfile;","import { FlatButton, Dialog } from 'material-ui';\nimport React from 'react';\nimport appActions from '../app.actions';\nimport i18n from '../locales'; // In development environments this won't provide the correct behavior\n// because the app is hosted on a different port, but once an app is deployed\n// reloading the window with an invalidated session will redirect to the login page\n\nconst reload = () => {\n  appActions.setCategory('account');\n  window.location.reload(true);\n};\n\nfunction PasswordChangeSuccessDialog() {\n  const titleText = i18n.t('Password changed successfully');\n  const bodyText = i18n.t('You need to login again to continue using the application.');\n  const buttonText = i18n.t('Login');\n  const buttons = [/*#__PURE__*/React.createElement(FlatButton, {\n    label: buttonText,\n    primary: true,\n    onClick: reload,\n    key: buttonText\n  })];\n  return /*#__PURE__*/React.createElement(Dialog, {\n    title: titleText,\n    actions: buttons,\n    modal: true,\n    open: true\n  }, bodyText);\n}\n\nexport default PasswordChangeSuccessDialog;","import { Paper } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport profileSettingsStore from '../../profile/profile.store';\nconst styles = {\n  qrCodePaperWrapper: {\n    padding: '1rem 0 0'\n  },\n  qrCodePaper: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-around',\n    alignItems: 'center',\n    padding: '1rem'\n  },\n  qrCode: {\n    padding: '1rem'\n  }\n};\n\nconst QRCode = ({\n  open\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.qrCodePaperWrapper\n}, open && /*#__PURE__*/React.createElement(Paper, {\n  style: styles.qrCodePaper\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.statusMessage\n}, /*#__PURE__*/React.createElement(\"b\", null, i18n.t('Barcode/QR code to scan'))), /*#__PURE__*/React.createElement(\"img\", {\n  style: styles.qrCode,\n  alt: \"qrCode\",\n  src: profileSettingsStore.state.qrCodeUrl\n})));\n\nQRCode.propTypes = {\n  open: PropTypes.bool.isRequired\n};\nexport default QRCode;","export default {\n  DEFAULT: 0,\n  ANDROID: 1,\n  IPHONE: 2\n};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../../locales';\nimport phoneTypes from './phoneTypes';\nconst playStoreLink = /*#__PURE__*/React.createElement(\"a\", {\n  href: \"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2\",\n  rel: \"noopener\"\n}, \"Play store.\");\nconst appStoreLink = /*#__PURE__*/React.createElement(\"a\", {\n  href: \"https://itunes.apple.com/no/app/google-authenticator/id388497605?mt=8\",\n  rel: \"noreferrer\"\n}, \"App store.\");\nconst styles = {\n  phoneTypeInstructions: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'space-between'\n  },\n  instructionItem: {\n    marginBottom: 10\n  }\n};\n\nconst PhoneTypeInstructions = ({\n  phoneType\n}) => phoneType !== phoneTypes.DEFAULT && /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.phoneTypeInstructions\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.instructionItem\n}, /*#__PURE__*/React.createElement(\"b\", null, \"1. \"), `${i18n.t('Download the Authenticator App from the ')} `, phoneType === phoneTypes.ANDROID && playStoreLink, phoneType === phoneTypes.IPHONE && appStoreLink), /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.instructionItem\n}, /*#__PURE__*/React.createElement(\"b\", null, \"2. \"), `${i18n.t('In the Authenticator App select ')} `, /*#__PURE__*/React.createElement(\"b\", null, i18n.t('Begin setup.'))), /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.instructionItem\n}, /*#__PURE__*/React.createElement(\"b\", null, \"3. \"), `${i18n.t('Choose ')} `, /*#__PURE__*/React.createElement(\"b\", null, i18n.t('Scan a barcode.'))));\n\nPhoneTypeInstructions.propTypes = {\n  phoneType: PropTypes.number.isRequired\n};\nexport default PhoneTypeInstructions;","import { RadioButtonGroup, RadioButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport phoneTypes from './phoneTypes';\nconst styles = {\n  radioGroup: {\n    marginTop: '1rem',\n    marginBottom: '1rem'\n  },\n  radioButton: {\n    marginBottom: 5\n  }\n};\n\nconst RadioButtons = ({\n  setPhoneType\n}) => /*#__PURE__*/React.createElement(RadioButtonGroup, {\n  name: \"phoneType\",\n  style: styles.radioGroup,\n  onChange: setPhoneType\n}, /*#__PURE__*/React.createElement(RadioButton, {\n  value: phoneTypes.ANDROID,\n  label: \"Android\",\n  style: styles.radioButton\n}), /*#__PURE__*/React.createElement(RadioButton, {\n  value: phoneTypes.IPHONE,\n  label: \"Iphone/Ipad\",\n  style: styles.radioButton\n}));\n\nRadioButtons.propTypes = {\n  setPhoneType: PropTypes.func.isRequired\n};\nexport default RadioButtons;","import { Paper } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../../locales';\nimport PhoneTypeInstructions from './PhoneTypeInstructions';\nimport RadioButtons from './RadioButtons';\nconst styles = {\n  downloadGuideWrapper: {\n    display: 'flex',\n    flexDirection: 'row',\n    padding: '1rem'\n  },\n  authIcon: {\n    height: '2em',\n    width: '2em',\n    marginRight: '1rem'\n  },\n  downloadGuide: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  authDownloadHeader: {\n    fontWeight: 500,\n    marginTop: '0.4rem',\n    marginBottom: '1rem'\n  }\n};\n\nconst DownloadGuide = ({\n  phoneType,\n  onPhoneTypeChange\n}) => /*#__PURE__*/React.createElement(Paper, {\n  style: styles.downloadGuideWrapper\n}, /*#__PURE__*/React.createElement(\"img\", {\n  style: styles.authIcon,\n  alt: \"authIcon\",\n  src: \"auth.png\"\n}), /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.downloadGuide\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.authDownloadHeader\n}, i18n.t('Download the Authenticator app')), /*#__PURE__*/React.createElement(\"div\", null, i18n.t('What kind of phone/tablet do you have?'), /*#__PURE__*/React.createElement(RadioButtons, {\n  setPhoneType: onPhoneTypeChange\n}), /*#__PURE__*/React.createElement(PhoneTypeInstructions, {\n  phoneType: phoneType\n}))));\n\nDownloadGuide.propTypes = {\n  phoneType: PropTypes.number.isRequired,\n  onPhoneTypeChange: PropTypes.func.isRequired\n};\nexport default DownloadGuide;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport i18n from '../../../locales';\nimport DownloadGuide from './DownloadGuide';\nimport phoneTypes from './phoneTypes';\nconst styles = {\n  guideHeader: {\n    fontWeight: 300,\n    padding: '24px 16px 24px 16px'\n  }\n};\n\nclass SetupGuide extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      phoneType: phoneTypes.DEFAULT\n    });\n\n    _defineProperty(this, \"setPhoneType\", (event, value) => this.setState({\n      phoneType: value\n    }));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, this.props.open && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.guideHeader\n    }, i18n.t('With 2-Factor authentication turned on you will be asked to enter a second verification code when you log in. To generate this verification code you must use the Authenticator app. If you do not have this app you must download it on your phone/tablet.')), /*#__PURE__*/React.createElement(DownloadGuide, {\n      phoneType: this.state.phoneType,\n      onPhoneTypeChange: this.setPhoneType\n    })));\n  }\n\n}\n\nSetupGuide.propTypes = {\n  open: PropTypes.bool.isRequired\n};\nexport default SetupGuide;","import { Paper, RaisedButton } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst styles = {\n  status: {\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    marginTop: '1rem',\n    padding: '0 1rem'\n  },\n  statusButton: {\n    margin: '1rem'\n  },\n  statusMessage: {\n    margin: '1rem'\n  }\n};\n\nconst Status2FA = ({\n  openSetupDialog,\n  statusMessage,\n  buttonLabel\n}) => /*#__PURE__*/React.createElement(Paper, {\n  style: styles.status\n}, /*#__PURE__*/React.createElement(\"div\", {\n  style: styles.statusMessage\n}, statusMessage), /*#__PURE__*/React.createElement(RaisedButton, {\n  style: styles.statusButton,\n  label: buttonLabel,\n  onClick: openSetupDialog,\n  primary: true\n}));\n\nStatus2FA.propTypes = {\n  buttonLabel: PropTypes.string.isRequired,\n  openSetupDialog: PropTypes.func.isRequired,\n  statusMessage: PropTypes.string.isRequired\n};\nexport default Status2FA;","import { FlatButton, Dialog } from 'material-ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\n\nconst Status2FAChangeDialog = ({\n  closeSetupDialog,\n  handleDialogAnswer,\n  dialogOpened,\n  dialogTitle\n}) => {\n  const buttons = [/*#__PURE__*/React.createElement(FlatButton, {\n    label: i18n.t('No'),\n    primary: true,\n    onClick: closeSetupDialog,\n    key: \"no\"\n  }), /*#__PURE__*/React.createElement(FlatButton, {\n    label: i18n.t('Yes'),\n    primary: true,\n    onClick: handleDialogAnswer,\n    key: \"yes\"\n  })];\n  return /*#__PURE__*/React.createElement(Dialog, {\n    title: dialogTitle,\n    actions: buttons,\n    modal: true,\n    open: dialogOpened\n  });\n};\n\nStatus2FAChangeDialog.propTypes = {\n  closeSetupDialog: PropTypes.func.isRequired,\n  dialogOpened: PropTypes.bool.isRequired,\n  dialogTitle: PropTypes.string.isRequired,\n  handleDialogAnswer: PropTypes.func.isRequired\n};\nexport default Status2FAChangeDialog;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Component } from 'react';\nimport i18n from '../../locales';\nimport profileSettingsStore from '../../profile/profile.store';\nimport accountActions from '../account.actions';\nimport QRCode from './QRCode';\nimport SetupGuide from './setup-guide/SetupGuide.component';\nimport Status2FA from './Status2FA';\nimport Status2FAChangeDialog from './Status2FAChangeDialog';\nconst styles = {\n  header: {\n    fontSize: 24,\n    fontWeight: 300,\n    padding: '24px 0 12px 16px'\n  }\n};\n\nclass TwoFactor extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      canRender: false,\n      isTwoFactorOn: false,\n      dialogOpened: false\n    });\n\n    _defineProperty(this, \"closeSetupDialog\", () => this.setState({\n      dialogOpened: false\n    }));\n\n    _defineProperty(this, \"openSetupDialog\", () => this.setState({\n      dialogOpened: true\n    }));\n\n    _defineProperty(this, \"changeTwoFactorStatus\", () => {\n      this.setState({\n        isTwoFactorOn: !this.state.isTwoFactorOn\n      }, () => {\n        accountActions.setTwoFactorStatus(this.state.isTwoFactorOn);\n      });\n    });\n\n    _defineProperty(this, \"handleDialogAnswer\", () => {\n      this.changeTwoFactorStatus();\n      this.closeSetupDialog();\n    });\n  }\n\n  componentDidMount() {\n    const status = profileSettingsStore.state.twoFA;\n    this.setState({\n      isTwoFactorOn: status,\n      canRender: true\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-area\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: styles.header\n    }, \"2 Factor\"), this.state.canRender && /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Status2FA, {\n      isTwoFactorOn: this.state.isTwoFactorOn,\n      openSetupDialog: this.openSetupDialog,\n      buttonLabel: this.state.isTwoFactorOn ? i18n.t('Turn OFF') : i18n.t('Turn ON'),\n      statusMessage: this.state.isTwoFactorOn ? i18n.t('2-Factor Verification is ON') : i18n.t('2-Factor Verification is OFF')\n    }), /*#__PURE__*/React.createElement(Status2FAChangeDialog, {\n      dialogTitle: this.state.isTwoFactorOn ? i18n.t('Do you want to turn OFF 2-Factor?') : i18n.t('Do you want to turn ON 2-Factor?'),\n      closeSetupDialog: this.closeSetupDialog,\n      handleDialogAnswer: this.handleDialogAnswer,\n      dialogOpened: this.state.dialogOpened\n    }), /*#__PURE__*/React.createElement(SetupGuide, {\n      open: this.state.isTwoFactorOn\n    }), /*#__PURE__*/React.createElement(QRCode, {\n      open: this.state.isTwoFactorOn\n    })));\n  }\n\n}\n\nexport default TwoFactor;","import Sidebar from 'd2-ui/lib/sidebar/Sidebar.component';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\n\nfunction SidebarWrapper(props) {\n  const sideBarSections = [{\n    key: 'profile',\n    label: i18n.t('User profile'),\n    icon: 'create'\n  }, {\n    key: 'settings',\n    label: i18n.t('User settings'),\n    icon: 'build'\n  }, {\n    key: 'account',\n    label: i18n.t('Account settings'),\n    icon: 'settings'\n  }, {\n    key: 'viewProfile',\n    label: i18n.t('Full profile'),\n    icon: 'face'\n  }, {\n    key: 'personalAccessTokens',\n    label: i18n.t('Personal access tokens'),\n    icon: 'badge'\n  }, {\n    key: 'aboutPage',\n    label: i18n.t('About DHIS2'),\n    icon: 'public'\n  }];\n  return /*#__PURE__*/React.createElement(Sidebar, {\n    sections: sideBarSections,\n    onChangeSection: appActions.setCategory,\n    currentSection: props.currentSection\n  });\n}\n\nSidebarWrapper.propTypes = {\n  currentSection: PropTypes.string\n};\nSidebarWrapper.defaultProps = {\n  currentSection: 'profile'\n};\nexport default SidebarWrapper;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport Snackbar from 'material-ui/Snackbar';\nimport React, { Component } from 'react';\nimport appActions from '../app.actions';\nconst messageStatus = {\n  warning: {\n    backgroundColor: '#FFA726'\n  },\n  error: {\n    backgroundColor: '#EF5350'\n  },\n  neutral: {\n    backgroundColor: 'black'\n  },\n  success: {\n    backgroundColor: '#9CCC65'\n  }\n};\nconst DEFAULT_AUTOHIDE_DURATION = 1250;\n\nclass SnackWrapper extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      snackbarMessage: '',\n      showSnackbar: false,\n      messageStatus: messageStatus['neutral'],\n      autoHideDuration: DEFAULT_AUTOHIDE_DURATION\n    });\n\n    _defineProperty(this, \"closeSnackbar\", () => {\n      this.setState({\n        showSnackbar: false\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.subscriptions = [];\n    this.subscriptions.push(appActions.showSnackbarMessage.subscribe(params => {\n      const message = params.data.message;\n      const status = params.data.status ? params.data.status : 'neutral';\n      const autoHideDuration = params.data.permanent ? undefined : DEFAULT_AUTOHIDE_DURATION;\n      this.setState({\n        snackbarMessage: message,\n        showSnackbar: !!message,\n        messageStatus: messageStatus[status],\n        autoHideDuration\n      });\n    }));\n  }\n\n  componentWillUnmount() {\n    this.subscriptions.forEach(sub => {\n      sub.unsubscribe();\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Snackbar, {\n      message: this.state.snackbarMessage,\n      autoHideDuration: this.state.autoHideDuration,\n      bodyStyle: this.state.messageStatus,\n      open: this.state.showSnackbar,\n      onRequestClose: this.closeSnackbar\n    });\n  }\n\n}\n\nexport default SnackWrapper;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { CenteredContent, CircularLoader, NoticeBox, Button } from '@dhis2/ui';\nimport React from 'react';\nimport i18n from '../../locales';\nimport styles from './AuthoritiesWarning.module.css';\nconst query = {\n  authorities: {\n    resource: 'me',\n    params: {\n      fields: ['authorities']\n    }\n  }\n};\n\nconst AuthoritiesWarning = () => {\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query);\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, {\n      small: true\n    }));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      className: styles.noticeBox,\n      error: true,\n      title: i18n.t('Error fetching your authorities')\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: refetch\n    }, i18n.t('Retry loading authorities')));\n  }\n\n  return /*#__PURE__*/React.createElement(NoticeBox, {\n    className: styles.noticeBox,\n    warning: true,\n    title: i18n.t('This token will have the following authorities')\n  }, /*#__PURE__*/React.createElement(\"ul\", null, data.authorities.authorities.map(authority => /*#__PURE__*/React.createElement(\"li\", {\n    key: authority\n  }, authority))));\n};\n\nexport default AuthoritiesWarning;","import { ReactFinalForm, CheckboxFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport i18n from '../../locales';\nimport styles from './AllowedMethodsFF.module.css';\n\nconst AllowedMethodsFF = () => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h3\", {\n  className: styles.header\n}, i18n.t('Allowed HTTP methods')), /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n  name: \"allowedMethodsGET\",\n  label: i18n.t('GET', {\n    context: 'HTTP method'\n  }),\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  initialValue: true\n}), /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n  name: \"allowedMethodsPOST\",\n  label: i18n.t('POST', {\n    context: 'HTTP method'\n  }),\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  initialValue: false\n}), /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n  name: \"allowedMethodsPUT\",\n  label: i18n.t('PUT', {\n    context: 'HTTP method'\n  }),\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  initialValue: false\n}), /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n  name: \"allowedMethodsPATCH\",\n  label: i18n.t('PATCH', {\n    context: 'HTTP method'\n  }),\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  initialValue: false\n}), /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n  name: \"allowedMethodsDELETE\",\n  label: i18n.t('DELETE', {\n    context: 'HTTP method'\n  }),\n  type: \"checkbox\",\n  component: CheckboxFieldFF,\n  initialValue: false\n}), /*#__PURE__*/React.createElement(\"small\", {\n  className: styles.helpText\n}, i18n.t('Only choose the HTTP methods this token needs to allow.')));\n\nexport default AllowedMethodsFF;","import { ReactFinalForm, TextAreaFieldFF } from '@dhis2/ui';\nimport React from 'react';\nimport i18n from '../../locales';\n\nconst isValidUrl = url => {\n  try {\n    const parsedUrl = new URL(url);\n    return ['http:', 'https:'].includes(parsedUrl.protocol);\n  } catch (error) {\n    return false;\n  }\n};\n\nconst referrerValidator = value => {\n  if (!value) {\n    return;\n  }\n\n  const referrers = value.split('\\n').filter(referrer => referrer.trim() !== '');\n\n  for (const referrer of referrers) {\n    if (!isValidUrl(referrer)) {\n      return i18n.t(`Invalid referrer '{{- referrer}}'`, {\n        referrer\n      });\n    }\n  }\n};\n\nconst AllowedReferrersFF = () => /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n  name: \"allowedReferrers\",\n  label: i18n.t('Allowed referrers'),\n  component: TextAreaFieldFF,\n  helpText: i18n.t('List one referrer per line.'),\n  rows: 3,\n  validate: referrerValidator\n});\n\nexport default AllowedReferrersFF;","import moment from 'moment';\n\nconst getTokenExpirationDate = value => {\n  const today = moment();\n\n  switch (value) {\n    case '7_DAYS':\n      return today.add(7, 'days');\n\n    case '30_DAYS':\n      return today.add(30, 'days');\n\n    case '60_DAYS':\n      return today.add(60, 'days');\n\n    case '90_DAYS':\n      return today.add(90, 'days');\n\n    default:\n      throw new Error(`Unknown expiration date input value: '${value}'`);\n  }\n};\n\nexport default getTokenExpirationDate;","import { ReactFinalForm, hasValue, composeValidators, InputFieldFF, SingleSelectFieldFF } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport styles from './ExpirationDateFF.module.css';\nimport getTokenExpirationDate from './getTokenExpirationDate.js';\n\nconst futureDateValidator = value => {\n  if (!value) {\n    return null;\n  }\n\n  if (new Date(value) < new Date()) {\n    return i18n.t('Token expiration date must be in the future');\n  }\n};\n\nconst expirationTimeOptions = [{\n  value: '7_DAYS',\n  label: i18n.t('7 days')\n}, {\n  value: '30_DAYS',\n  label: i18n.t('30 days')\n}, {\n  value: '60_DAYS',\n  label: i18n.t('60 days')\n}, {\n  value: '90_DAYS',\n  label: i18n.t('90 days')\n}, {\n  value: 'CUSTOM',\n  label: i18n.t('Custom...')\n}];\n\nconst renderExpirationDate = value => {\n  if (!value || value === 'CUSTOM') {\n    return null;\n  }\n\n  return i18n.t('The token will expire on {{- tokenExpirationDate}}.', {\n    tokenExpirationDate: getTokenExpirationDate(value).format('LL')\n  });\n};\n\nconst ExpirationDateFF = ({\n  values\n}) => {\n  const value = values['expirationDate'];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n    required: true,\n    name: \"expirationDate\",\n    label: i18n.t('Expiration (required)'),\n    initialValue: '30_DAYS',\n    component: SingleSelectFieldFF,\n    options: expirationTimeOptions,\n    validate: hasValue,\n    helpText: renderExpirationDate(value)\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.flex\n  }, value === 'CUSTOM' && /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n    required: true,\n    name: \"customExpirationDate\",\n    label: i18n.t('Custom expiration date (required)'),\n    type: \"date\",\n    component: InputFieldFF,\n    options: expirationTimeOptions,\n    validate: composeValidators(hasValue, futureDateValidator)\n  })));\n};\n\nExpirationDateFF.propTypes = {\n  values: PropTypes.object.isRequired\n};\nexport default ExpirationDateFF;","import { IconWarning16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport AllowedMethodsFF from './AllowedMethodsFF.component.js';\nimport AllowedReferrersFF from './AllowedReferrersFF.component.js';\nimport ExpirationDateFF from './ExpirationDateFF.component.js';\nimport styles from './Form.module.css';\n\nconst BrowserForm = ({\n  values\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.field\n}, /*#__PURE__*/React.createElement(ExpirationDateFF, {\n  values: values\n})), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.fieldWithExplanation\n}, /*#__PURE__*/React.createElement(AllowedReferrersFF, null), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.explanation\n}, /*#__PURE__*/React.createElement(IconWarning16, null), i18n.t('Important: this is not a security feature. The referrer header can easily be spoofed. This setting is intended to discourage unauthorised third-party developers from connecting to public access instances.', {\n  nsSeparator: '-:-'\n}))), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.field\n}, /*#__PURE__*/React.createElement(AllowedMethodsFF, null)));\n\nBrowserForm.propTypes = {\n  values: PropTypes.object.isRequired\n};\nexport default BrowserForm;","import { Radio } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport styles from './ContextSelector.module.css';\n\nconst Context = ({\n  title,\n  children,\n  selected,\n  onSelect\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: selected ? styles.selectedContext : styles.context,\n  onClick: onSelect\n}, /*#__PURE__*/React.createElement(Radio, {\n  checked: selected,\n  onChange: onSelect,\n  dense: true\n}), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", {\n  className: styles.contextTitle\n}, title), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.contextDescription\n}, children)));\n\nContext.propTypes = {\n  children: PropTypes.node.isRequired,\n  selected: PropTypes.bool.isRequired,\n  title: PropTypes.string.isRequired,\n  onSelect: PropTypes.func.isRequired\n};\n\nconst ContextSelector = ({\n  context,\n  setContext\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n  className: styles.header\n}, i18n.t('Choose the context where this token will be used.')), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.contexts\n}, /*#__PURE__*/React.createElement(Context, {\n  title: i18n.t('Server/script context'),\n  selected: context === 'SERVER',\n  onSelect: () => setContext('SERVER')\n}, i18n.t(`Used for integrations and scripts that won't be accessed by a browser.`)), /*#__PURE__*/React.createElement(Context, {\n  title: i18n.t('Browser context'),\n  selected: context === 'BROWSER',\n  onSelect: () => setContext('BROWSER')\n}, i18n.t('Used for applications, like public portals, that will be accessed with a web browser.'))));\n\nContextSelector.propTypes = {\n  setContext: PropTypes.func.isRequired,\n  context: PropTypes.string\n};\nexport default ContextSelector;","import { ReactFinalForm, TextAreaFieldFF } from '@dhis2/ui';\nimport ipRegex from 'ip-regex';\nimport React from 'react';\nimport i18n from '../../locales';\n\nconst isValidIpAddress = ipAddress => ipRegex({\n  exact: true\n}).test(ipAddress);\n\nconst ipAddresesValidator = value => {\n  if (!value) {\n    return;\n  }\n\n  const ipAddresses = value.split('\\n').filter(ipAddress => ipAddress.trim() !== '');\n\n  for (const ipAddress of ipAddresses) {\n    if (!isValidIpAddress(ipAddress)) {\n      return i18n.t(`Invalid IP address '{{- ipAddress}}'`, {\n        ipAddress\n      });\n    }\n  }\n};\n\nconst AllowedIpsFF = () => /*#__PURE__*/React.createElement(ReactFinalForm.Field, {\n  name: \"allowedIps\",\n  label: i18n.t('Allowed IP addresses'),\n  component: TextAreaFieldFF,\n  helpText: i18n.t('List one IP address per line.'),\n  rows: 3,\n  validate: ipAddresesValidator\n});\n\nexport default AllowedIpsFF;","import { IconWarning16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport AllowedIpsFF from './AllowedIpsFF.component.js';\nimport AllowedMethodsFF from './AllowedMethodsFF.component.js';\nimport ExpirationDateFF from './ExpirationDateFF.component.js';\nimport styles from './Form.module.css';\n\nconst ServerForm = ({\n  values\n}) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.field\n}, /*#__PURE__*/React.createElement(ExpirationDateFF, {\n  values: values\n})), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.fieldWithExplanation\n}, /*#__PURE__*/React.createElement(AllowedIpsFF, null), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.explanation\n}, /*#__PURE__*/React.createElement(IconWarning16, null), i18n.t('Important: IP address validation relies on the X-Forwarded-For header, which can be spoofed. For security, make sure a load balancer or reverse proxy overwrites this header.', {\n  nsSeparator: '-:-'\n}))), /*#__PURE__*/React.createElement(\"div\", {\n  className: styles.field\n}, /*#__PURE__*/React.createElement(AllowedMethodsFF, null)));\n\nServerForm.propTypes = {\n  values: PropTypes.object.isRequired\n};\nexport default ServerForm;","import { useDataMutation, useAlert } from '@dhis2/app-runtime';\nimport { Button, ButtonStrip, Modal, ModalTitle, ModalContent, ModalActions, ReactFinalForm } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport i18n from '../../locales';\nimport AuthoritiesWarning from './AuthoritiesWarning.component.js';\nimport BrowserForm from './BrowserForm.component.js';\nimport ContextSelector from './ContextSelector.component.js';\nimport formStyles from './Form.module.css';\nimport getTokenExpirationDate from './getTokenExpirationDate.js';\nimport ServerForm from './ServerForm.component.js';\n\nconst renderContext = ({\n  context,\n  values\n}) => {\n  switch (context) {\n    case 'SERVER':\n      return /*#__PURE__*/React.createElement(ServerForm, {\n        values: values\n      });\n\n    case 'BROWSER':\n      return /*#__PURE__*/React.createElement(BrowserForm, {\n        values: values\n      });\n\n    default:\n      throw new Error(`Unknown context: '${context}'`);\n  }\n};\n\nconst generateTokenMutation = {\n  resource: 'apiToken',\n  type: 'create',\n  data: data => data\n};\n\nconst getExpire = formParams => {\n  const expirationDate = formParams.expirationDate === 'CUSTOM' ? new Date(formParams.customExpirationDate) : getTokenExpirationDate(formParams.expirationDate);\n  return Number(expirationDate);\n};\n\nconst getAllowedIpsAttribute = ({\n  allowedIps\n}) => {\n  if (!allowedIps) {\n    return null;\n  }\n\n  return {\n    type: 'IpAllowedList',\n    allowedIps: allowedIps.split('\\n').filter(ipAddress => ipAddress.trim() !== '')\n  };\n};\n\nconst getAllowedMethodsAttribute = ({\n  allowedMethodsGET,\n  allowedMethodsPOST,\n  allowedMethodsPUT,\n  allowedMethodsPATCH,\n  allowedMethodsDELETE\n}) => {\n  return {\n    type: 'MethodAllowedList',\n    allowedMethods: [allowedMethodsGET && 'GET', allowedMethodsPOST && 'POST', allowedMethodsPUT && 'PUT', allowedMethodsPATCH && 'PATCH', allowedMethodsDELETE && 'DELETE'].filter(am => typeof am === 'string')\n  };\n};\n\nconst getAllowedReferersAttribute = ({\n  allowedReferrers\n}) => {\n  if (!allowedReferrers) {\n    return null;\n  }\n\n  return {\n    type: 'RefererAllowedList',\n    allowedReferrers: allowedReferrers.split('\\n').filter(referrer => referrer.trim() !== '')\n  };\n};\n\nconst GenerateTokenModal = ({\n  onGenerate,\n  onClose\n}) => {\n  const errorAlert = useAlert(({\n    error\n  }) => error.message, {\n    critical: true\n  });\n  const [generateToken, {\n    loading\n  }] = useDataMutation(generateTokenMutation, {\n    onComplete: data => {\n      const {\n        uid: id,\n        key\n      } = data.response;\n      onGenerate({\n        id,\n        key\n      });\n      onClose();\n    },\n    onError: error => {\n      errorAlert.show({\n        error\n      });\n    }\n  });\n  const [context, setContext] = useState(null);\n\n  const handleGenerate = formParams => {\n    if (context === 'BROWSER' && !confirm(i18n.t('Personal access tokens should only be used in a browser context for public access instances. For private instances, tokens should be treated like passwords and be kept private — requests should instead be routed through a proxy.'))) {\n      return;\n    }\n\n    const params = {\n      expire: getExpire(formParams),\n      attributes: [getAllowedIpsAttribute(formParams), getAllowedMethodsAttribute(formParams), getAllowedReferersAttribute(formParams)].filter(a => a !== null)\n    };\n    generateToken(params);\n  };\n\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    large: true\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Generate new token')), /*#__PURE__*/React.createElement(ReactFinalForm.Form, {\n    onSubmit: handleGenerate\n  }, ({\n    handleSubmit,\n    valid,\n    values\n  }) => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(ContextSelector, {\n    context: context,\n    setContext: setContext\n  }), context && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: formStyles.header\n  }, i18n.t('Token details')), renderContext({\n    context,\n    values\n  }), /*#__PURE__*/React.createElement(AuthoritiesWarning, null))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: onClose,\n    secondary: true\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: handleSubmit,\n    disabled: !context || !valid,\n    loading: loading\n  }, i18n.t('Generate new token')))))));\n};\n\nGenerateTokenModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n  onGenerate: PropTypes.func.isRequired\n};\nexport default GenerateTokenModal;","import { useState } from 'react';\nexport const useModal = () => {\n  const [isVisible, setIsVisible] = useState(false);\n  return {\n    isVisible,\n    show: () => setIsVisible(true),\n    hide: () => setIsVisible(false)\n  };\n};","import { useDataMutation } from '@dhis2/app-runtime';\nimport { Button, ButtonStrip, Modal, ModalTitle, ModalContent, ModalActions, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nconst mutation = {\n  resource: 'apiToken',\n  type: 'delete',\n  id: ({\n    id\n  }) => id\n};\n\nconst ConfirmDeleteModal = ({\n  tokenId,\n  onClose,\n  onDelete\n}) => {\n  const [deleteToken, {\n    loading,\n    error\n  }] = useDataMutation(mutation, {\n    onComplete: () => {\n      onDelete();\n      onClose();\n    }\n  });\n  return /*#__PURE__*/React.createElement(Modal, {\n    onClose: onClose,\n    small: true\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Are you sure you want to delete this token?')), /*#__PURE__*/React.createElement(ModalContent, null, error && /*#__PURE__*/React.createElement(NoticeBox, {\n    error: true,\n    title: i18n.t('Error deleting token')\n  }, error.message), i18n.t(`Any application or script using this token will no longer be able to access this instance's API. You cannot undo this action.`)), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onClose\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    destructive: true,\n    onClick: () => deleteToken({\n      id: tokenId\n    }),\n    loading: loading\n  }, i18n.t('Delete token')))));\n};\n\nConfirmDeleteModal.propTypes = {\n  tokenId: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired\n};\nexport default ConfirmDeleteModal;","import PropTypes from 'prop-types';\nconst TokenPropType = PropTypes.shape({\n  attributes: PropTypes.array.isRequired,\n  createdAt: PropTypes.instanceOf(Date).isRequired,\n  expiresAt: PropTypes.instanceOf(Date).isRequired,\n  id: PropTypes.string.isRequired,\n  key: PropTypes.string\n});\nexport default TokenPropType;","import { Tag, Tooltip } from '@dhis2/ui';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport styles from './ExistingToken.module.css';\nimport TokenPropType from './TokenPropType.js';\n\nconst getAttribute = (attributes, type, field) => {\n  const attribute = attributes.find(attribute => attribute.type === type);\n\n  if (!attribute) {\n    return null;\n  }\n\n  return attribute[field];\n};\n\nconst RelativeDateTime = ({\n  dateTime\n}) => /*#__PURE__*/React.createElement(Tooltip, {\n  content: dateTime.toISOString()\n}, moment(dateTime).fromNow());\n\nRelativeDateTime.propTypes = {\n  dateTime: PropTypes.instanceOf(Date).isRequired\n};\n\nconst Item = ({\n  title,\n  children,\n  singleLine\n}) => /*#__PURE__*/React.createElement(\"div\", {\n  className: singleLine ? styles.singleLineItem : styles.item\n}, /*#__PURE__*/React.createElement(\"dt\", {\n  className: styles.itemTitle\n}, title), /*#__PURE__*/React.createElement(\"dd\", {\n  className: styles.itemValue\n}, children));\n\nItem.defaultProps = {\n  singleLine: false\n};\nItem.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string.isRequired,\n  singleLine: PropTypes.bool\n};\n\nconst ExistingToken = ({\n  token\n}) => {\n  const {\n    attributes,\n    createdAt,\n    expiresAt\n  } = token;\n  const allowedMethods = getAttribute(attributes, 'MethodAllowedList', 'allowedMethods');\n  const allowedIps = getAttribute(attributes, 'IpAllowedList', 'allowedIps');\n  const allowedReferrers = getAttribute(attributes, 'RefererAllowedList', 'allowedReferrers');\n  return /*#__PURE__*/React.createElement(\"dl\", {\n    className: styles.items\n  }, /*#__PURE__*/React.createElement(Item, {\n    title: i18n.t('Expires'),\n    singleLine: true\n  }, /*#__PURE__*/React.createElement(RelativeDateTime, {\n    dateTime: expiresAt\n  })), /*#__PURE__*/React.createElement(Item, {\n    title: i18n.t('Created'),\n    singleLine: true\n  }, /*#__PURE__*/React.createElement(RelativeDateTime, {\n    dateTime: createdAt\n  })), allowedMethods && /*#__PURE__*/React.createElement(Item, {\n    title: i18n.t('Allowed HTTP methods')\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.allowedMethods\n  }, allowedMethods.map(method => /*#__PURE__*/React.createElement(Tag, {\n    key: method,\n    positive: true\n  }, method)))), allowedIps && /*#__PURE__*/React.createElement(Item, {\n    title: i18n.t('Allowed IP addresses')\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.allowedList\n  }, allowedIps.map(ip => /*#__PURE__*/React.createElement(\"li\", {\n    key: ip\n  }, ip)))), allowedReferrers && /*#__PURE__*/React.createElement(Item, {\n    title: i18n.t('Allowed referrers')\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.allowedList\n  }, allowedReferrers.map(referrer => /*#__PURE__*/React.createElement(\"li\", {\n    key: referrer\n  }, referrer)))));\n};\n\nExistingToken.propTypes = {\n  token: TokenPropType.isRequired\n};\nexport default ExistingToken;","import { useAlert } from '@dhis2/app-runtime';\nimport { Button, IconCopy16 } from '@dhis2/ui';\nimport React from 'react';\nimport i18n from '../../locales';\nimport styles from './NewToken.module.css';\nimport TokenPropType from './TokenPropType.js';\n\nconst NewToken = ({\n  token\n}) => {\n  const copiedAlert = useAlert(i18n.t('Copied token to clipboard'), {\n    success: true\n  });\n\n  const handleCopy = () => {\n    navigator.clipboard.writeText(token.key);\n    copiedAlert.show();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.header\n  }, i18n.t('Newly created token')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.token\n  }, token.key, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCopy,\n    icon: /*#__PURE__*/React.createElement(IconCopy16, null),\n    small: true\n  }, i18n.t('Copy to clipboard'))));\n};\n\nNewToken.propTypes = {\n  token: TokenPropType.isRequired\n};\nexport default NewToken;","import { Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../../locales';\nimport { useModal } from '../use-modal.js';\nimport ConfirmDeleteModal from './ConfirmDeleteModal.component.js';\nimport ExistingToken from './ExistingToken.component.js';\nimport NewToken from './NewToken.component.js';\nimport styles from './TokenCard.module.css';\nimport TokenPropType from './TokenPropType.js';\n\nconst TokenCard = ({\n  token,\n  onDelete\n}) => {\n  const confirmDeleteModal = useModal();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, confirmDeleteModal.isVisible && /*#__PURE__*/React.createElement(ConfirmDeleteModal, {\n    tokenId: token.id,\n    onClose: confirmDeleteModal.hide,\n    onDelete: onDelete\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: token.key ? styles.newToken : styles.token\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.tokenData\n  }, token.key ? /*#__PURE__*/React.createElement(NewToken, {\n    token: token\n  }) : /*#__PURE__*/React.createElement(ExistingToken, {\n    token: token\n  })), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Button, {\n    onClick: confirmDeleteModal.show\n  }, i18n.t('Delete')))));\n};\n\nTokenCard.propTypes = {\n  token: TokenPropType.isRequired,\n  onDelete: PropTypes.func.isRequired\n};\nexport default TokenCard;","import { CenteredContent, CircularLoader, NoticeBox } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport i18n from '../locales';\nimport TokenCard from './tokenCard/TokenCard.component.js';\nimport styles from './TokensList.module.css';\n\nconst TokensList = ({\n  loading,\n  error,\n  tokens,\n  onDelete\n}) => {\n  if (loading) {\n    return /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null));\n  }\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(NoticeBox, {\n      error: true,\n      title: i18n.t('Error loading personal access tokens')\n    }, error.message);\n  }\n\n  if (!tokens.length) {\n    return /*#__PURE__*/React.createElement(\"p\", null, i18n.t(`You don't have any active personal access tokens`));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, tokens.some(({\n    key\n  }) => key) ? /*#__PURE__*/React.createElement(NoticeBox, {\n    className: styles.copyTokenNotice,\n    title: i18n.t(`You'll only be shown your token once`)\n  }, i18n.t(`Make sure to copy your personal access token now. You won't be able to see it again`)) : null, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.list\n  }, tokens.map(token => /*#__PURE__*/React.createElement(TokenCard, {\n    key: token.id,\n    token: token,\n    onDelete: onDelete\n  }))));\n};\n\nTokensList.propTypes = {\n  onDelete: PropTypes.func.isRequired,\n  error: PropTypes.object,\n  loading: PropTypes.bool,\n  tokens: PropTypes.array\n};\nexport default TokensList;","import { useDataQuery } from '@dhis2/app-runtime';\nimport { Card, Button } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport i18n from '../locales';\nimport userProfileStore from '../profile/profile.store.js';\nimport GenerateTokenModal from './generateTokenModal/GenerateTokenModal.component.js';\nimport styles from './PersonalAccessTokens.module.css';\nimport TokensList from './TokensList.component.js';\nimport { useModal } from './use-modal.js';\nconst query = {\n  tokens: {\n    resource: 'apiToken',\n    params: ({\n      userId\n    }) => ({\n      fields: ['id', 'created', 'expire', 'attributes'],\n      paging: false,\n      filter: `createdBy.id:eq:${userId}`\n    })\n  }\n};\n\nconst PersonalAccessTokens = () => {\n  const userId = userProfileStore.state.id;\n  const [tokenKeys, setTokenKeys] = useState(new Map());\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useDataQuery(query, {\n    variables: {\n      userId\n    }\n  });\n  const generateTokenModal = useModal();\n  const tokens = data === null || data === void 0 ? void 0 : data.tokens.apiToken.map(({\n    id,\n    created,\n    expire,\n    attributes\n  }) => {\n    return {\n      id,\n      attributes,\n      createdAt: new Date(created),\n      expiresAt: new Date(expire),\n      key: tokenKeys.get(id)\n    };\n  }).filter(({\n    expiresAt\n  }) => expiresAt > new Date());\n\n  const handleGenerate = ({\n    id,\n    key\n  }) => {\n    setTokenKeys(tokenKeys.set(id, key));\n    refetch();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, generateTokenModal.isVisible && /*#__PURE__*/React.createElement(GenerateTokenModal, {\n    onGenerate: handleGenerate,\n    onClose: generateTokenModal.hide\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-area\"\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: styles.heading\n  }, i18n.t('Manage personal access tokens')), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.cardWrapper\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: styles.card\n  }, /*#__PURE__*/React.createElement(TokensList, {\n    loading: loading,\n    error: error,\n    tokens: tokens,\n    onDelete: refetch\n  }), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: generateTokenModal.show\n  }, i18n.t('Generate new token'))))));\n};\n\nexport default PersonalAccessTokens;","import React from 'react';\nimport FormFields from '../layout/FormFields.component';\nimport i18n from '../locales';\nimport userProfileActions from './profile.actions';\nimport userProfileStore from './profile.store';\n\nfunction EditProfile() {\n  const fieldKeys = ['firstName', 'surname', 'email', 'avatar', 'phoneNumber', 'introduction', 'jobTitle', 'gender', 'birthday', 'nationality', 'employer', 'education', 'interests', 'languages', 'whatsApp', 'facebookMessenger', 'skype', 'telegram', 'twitter'];\n  const pageLabel = i18n.t('Edit user profile');\n  return /*#__PURE__*/React.createElement(FormFields, {\n    pageLabel: pageLabel,\n    fieldKeys: fieldKeys,\n    valueStore: userProfileStore,\n    onUpdateField: userProfileActions.save\n  });\n}\n\nexport default EditProfile;","import { getInstance as getD2 } from 'd2';\nimport Action from 'd2-ui/lib/action/Action';\nimport log from 'loglevel';\nimport appActions from '../app.actions';\nimport i18n from '../locales';\nimport userSettingsStore from './userSettings.store';\nconst userSettingsActions = Action.createActionsFromNames(['save']);\nuserSettingsActions.save.subscribe(({\n  data,\n  complete,\n  error\n}) => {\n  const key = data[0];\n  const value = data[1] === 'null' || data[1] === 'system_default' ? null : data[1];\n  getD2().then(d2 => {\n    d2.currentUser.userSettings.set(key, value).then(() => {\n      userSettingsStore.state[key] = value;\n      userSettingsStore.setState(userSettingsStore.state);\n      log.debug('User Setting updated successfully.');\n      appActions.showSnackbarMessage({\n        message: i18n.t('Settings updated'),\n        status: 'success'\n      });\n      complete();\n    }).catch(err => {\n      userSettingsStore.setState(userSettingsStore.state);\n      log.warn('API call failed:', err);\n      appActions.showSnackbarMessage({\n        message: i18n.t('Failed to update settings'),\n        status: 'error'\n      });\n      error();\n    });\n  });\n});\nexport default userSettingsActions;","import React from 'react';\nimport FormFields from '../layout/FormFields.component';\nimport i18n from '../locales';\nimport userSettingsActions from './userSettings.actions';\nimport userSettingsStore from './userSettings.store';\n\nfunction EditProfile() {\n  const fieldKeys = ['keyUiLocale', 'keyDbLocale', 'keyStyle', 'keyAnalysisDisplayProperty', 'keyMessageEmailNotification', 'keyMessageSmsNotification'];\n  const pageLabel = i18n.t('Edit user settings');\n  return /*#__PURE__*/React.createElement(FormFields, {\n    pageLabel: pageLabel,\n    fieldKeys: fieldKeys,\n    valueStore: userSettingsStore,\n    onUpdateField: userSettingsActions.save\n  });\n}\n\nexport default EditProfile;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Card, CardText } from 'material-ui/Card';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport settingsKeyMapping from '../userSettingsMapping';\nimport InfoHeader from './InfoHeader.component';\nimport InfoRow from './InfoRow.component';\nconst styles = {\n  card: {\n    marginTop: 8,\n    marginRight: '1rem',\n    padding: '0 1rem'\n  }\n};\n\nclass InfoCard extends Component {\n  constructor(...args) {\n    super(...args);\n\n    _defineProperty(this, \"state\", {\n      canRender: false\n    });\n  }\n\n  componentDidMount() {\n    Promise.all([this.props.valueStore.state.getUserRoles(), this.props.valueStore.state.getOrganisationUnits()]).then(response => {\n      this.userRoles = response[0];\n      this.userOrgUnits = response[1];\n      this.setState({\n        canRender: true\n      });\n    });\n  }\n\n  getUserOrgUnitsValue() {\n    const userOrgUnitsValues = [];\n    this.userOrgUnits.valuesContainerMap.forEach(value => userOrgUnitsValues.push(value.name));\n    return userOrgUnitsValues.join(', ');\n  }\n\n  getUserRolesValue() {\n    const userRolesValues = [];\n    this.userRoles.valuesContainerMap.forEach(value => userRolesValues.push(value.name));\n    return userRolesValues.join(', ');\n  }\n\n  getOptionTypeValue(labelName) {\n    const value = this.props.valueStore.state[labelName];\n    return value || value === false ? settingsKeyMapping[labelName].options[value] : 'null';\n  }\n\n  getBirthdayDateValue(dateValue) {\n    const birthday = new Date(dateValue); // Silly Date class gives day of month from getDate() and getMonth() is based from 0-11.\n    // TODO: Use locale date formatting\n\n    return birthday.getDate() + '-' + (birthday.getMonth() + 1) + '-' + birthday.getFullYear();\n  }\n\n  getLabelValue(labelName, type) {\n    if (!this.labelExists(labelName, type)) {\n      return '';\n    }\n\n    const labelValue = String(this.props.valueStore.state[labelName]).trim();\n\n    switch (type) {\n      case 'textfield':\n        return labelValue;\n\n      case 'date':\n        return this.getBirthdayDateValue(this.props.valueStore.state[labelName]);\n\n      case 'dropdown':\n        return this.getOptionTypeValue(labelName);\n\n      case 'userOrgUnits':\n        return this.getUserOrgUnitsValue();\n\n      case 'userRoles':\n        return this.getUserRolesValue();\n\n      default:\n        return `${labelValue} value not found`;\n    }\n  }\n\n  getLabelComponent(labelName) {\n    const mapping = settingsKeyMapping[labelName];\n    const translatedLabelName = mapping.label;\n    const labelValue = this.getLabelValue(labelName, mapping.type);\n    return /*#__PURE__*/React.createElement(InfoRow, {\n      key: translatedLabelName,\n      label: translatedLabelName,\n      value: labelValue\n    });\n  }\n\n  getLabelComponents(labelNames) {\n    const labelComponents = labelNames.map(labelName => this.getLabelComponent(labelName));\n    return labelComponents;\n  }\n\n  labelExists(labelName, type) {\n    return this.props.valueStore.state && Object.prototype.hasOwnProperty.call(this.props.valueStore.state, labelName) || type === 'userRoles' || type === 'userOrgUnits';\n  }\n\n  renderLabels(labelNames) {\n    return /*#__PURE__*/React.createElement(Card, {\n      style: styles.card\n    }, /*#__PURE__*/React.createElement(CardText, null, /*#__PURE__*/React.createElement(\"table\", {\n      className: \"info-content\"\n    }, /*#__PURE__*/React.createElement(\"tbody\", null, this.getLabelComponents(labelNames)))));\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content-area\"\n    }, /*#__PURE__*/React.createElement(InfoHeader, {\n      text: this.props.pageLabel\n    }), this.state.canRender && this.renderLabels(this.props.labelKeys));\n  }\n\n}\n\nInfoCard.propTypes = {\n  labelKeys: PropTypes.arrayOf(PropTypes.string).isRequired,\n  pageLabel: PropTypes.string.isRequired,\n  valueStore: PropTypes.object.isRequired\n};\nexport default InfoCard;","import React from 'react';\nimport InfoCard from '../layout/InfoCard.component';\nimport i18n from '../locales';\nimport profileSettingsStore from '../profile/profile.store';\n\nfunction ViewProfile() {\n  const labelKeys = ['firstName', 'surname', 'gender', 'email', 'phoneNumber', 'introduction', 'birthday', 'nationality', 'employer', 'jobTitle', 'userRoles', 'userOrgUnits', 'education', 'interests', 'languages'];\n  const pageLabel = i18n.t('View full profile');\n  return /*#__PURE__*/React.createElement(InfoCard, {\n    pageLabel: pageLabel,\n    labelKeys: labelKeys,\n    valueStore: profileSettingsStore\n  });\n}\n\nexport default ViewProfile;","import { DataProvider } from '@dhis2/app-runtime';\nimport { CssVariables } from '@dhis2/ui';\nimport MuiThemeProvider from 'material-ui/styles/MuiThemeProvider';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { Router, Route, hashHistory, Redirect } from 'react-router';\nimport AboutPage from './aboutPage/AboutPage.component';\nimport Account from './account/Account.component';\nimport PasswordChangeSuccessDialog from './account/PasswordChangeSuccessDialog';\nimport TwoFactor from './account/twoFactor/TwoFactor';\nimport Sidebar from './layout/Sidebar.component';\nimport Snackbar from './layout/Snackbar.component';\nimport AppTheme from './layout/theme';\nimport PersonalAccessTokens from './personalAccessTokens/PersonalAccessTokens.component';\nimport Profile from './profile/Profile.component';\nimport UserSettings from './settings/UserSettings.component';\nimport ViewProfile from './viewProfile/ViewProfile.component';\n\nfunction WrappedApp(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"content-wrap\"\n  }, /*#__PURE__*/React.createElement(Sidebar, {\n    currentSection: props.routes[1].path\n  }), props.children);\n}\n\nWrappedApp.propTypes = {\n  children: PropTypes.any.isRequired,\n  routes: PropTypes.array.isRequired\n};\n\nclass AppRouter extends Component {\n  getChildContext() {\n    return {\n      d2: this.props.d2,\n      muiTheme: AppTheme\n    };\n  }\n\n  getDataProviderProps() {\n    const baseUrl = this.props.d2.system.systemInfo.contextPath;\n    const apiUrl = this.props.d2.system.settings.api.baseUrl;\n    const versionString = apiUrl.split('/').pop();\n    const apiVersion = isNaN(parseInt(versionString, 10)) ? '' : versionString;\n    return {\n      baseUrl,\n      apiVersion\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(DataProvider, this.getDataProviderProps(), /*#__PURE__*/React.createElement(CssVariables, {\n      colors: true,\n      spacers: true\n    }), /*#__PURE__*/React.createElement(MuiThemeProvider, {\n      muiTheme: AppTheme\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"app-wrapper\"\n    }, /*#__PURE__*/React.createElement(Snackbar, null), /*#__PURE__*/React.createElement(Router, {\n      history: hashHistory\n    }, /*#__PURE__*/React.createElement(Route, {\n      component: WrappedApp\n    }, /*#__PURE__*/React.createElement(Route, {\n      path: \"settings\",\n      component: UserSettings\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"profile\",\n      component: Profile\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"account\",\n      component: Account\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"twoFactor\",\n      component: TwoFactor\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"passwordChanged\",\n      component: PasswordChangeSuccessDialog\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"viewProfile\",\n      component: ViewProfile\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"personalAccessTokens\",\n      component: PersonalAccessTokens\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: \"aboutPage\",\n      component: AboutPage\n    }), /*#__PURE__*/React.createElement(Redirect, {\n      from: \"/\",\n      to: \"/viewProfile\"\n    }))))));\n  }\n\n}\n\nAppRouter.propTypes = {\n  d2: PropTypes.object.isRequired\n};\nAppRouter.childContextTypes = {\n  d2: PropTypes.object,\n  muiTheme: PropTypes.object\n};\nexport default AppRouter;","import { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport log from 'loglevel';\nimport React from 'react';\nimport AppRouter from './app.router.js';\nimport optionValueStore from './optionValue.store';\nimport userProfileStore from './profile/profile.store';\nimport userSettingsStore from './settings/userSettings.store';\nimport './locales';\nimport './layout/app.css';\nimport 'material-design-icons-iconfont/dist/material-design-icons.css';\n\nconst AppWrapper = () => {\n  const {\n    d2\n  } = useD2({\n    onInitialized: d2 => {\n      const api = d2.Api.getApi();\n      return Promise.all([api.get('system/styles'), api.get('locales/ui'), api.get('locales/db'), api.get('userSettings', {\n        useFallback: false\n      }), d2.system.settings.all(), api.get('2fa/qr')]).then(results => {\n        const styles = (results[0] || []).map(style => ({\n          id: style.path,\n          displayName: style.name\n        }));\n        const uiLocales = (results[1] || []).map(locale => ({\n          id: locale.locale,\n          displayName: locale.name\n        }));\n        const dbLocales = (results[2] || []).map(locale => ({\n          id: locale.locale,\n          displayName: locale.name\n        }));\n        const systemDefault = { ...results[4]\n        };\n        userProfileStore.setState(d2.currentUser);\n        userProfileStore.state.qrCodeUrl = results[5].url;\n        userSettingsStore.setState(results[3]);\n        optionValueStore.setState({\n          styles,\n          uiLocales,\n          dbLocales,\n          systemDefault\n        });\n        log.debug('Current user profile loaded:', userProfileStore.state);\n        log.debug('Current user settings loaded:', userSettingsStore.state);\n      }, error => {\n        log.error('Failed to load user settings:', error);\n      });\n    }\n  });\n\n  if (!d2) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(AppRouter, {\n    d2: d2\n  });\n};\n\nexport default AppWrapper;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Form_header__2wJi9\",\"field\":\"Form_field__13n8f\",\"fieldWithExplanation\":\"Form_fieldWithExplanation__3DoEO Form_field__13n8f\",\"explanation\":\"Form_explanation__1-C4C\"};"],"sourceRoot":""}